mini-buildd (0.9.6~94.gbp13e2d6) experimental; urgency=low

  ** SNAPSHOT build @13e2d6f588e397fd293b23c184197ac707437edd **

  [ Stephan Sürken ]
  This release fixes quite a number of glitches due to the reprepro change
  and newer sbuild/schroot versions, and updates to the new proposed
  distribution setup featuring experimental, unstable, testing and
  stable for each base distribution:

  * [cdb1529] lib/mbd-update-rep-html: Fix distribution URL for new
    repository layout.
  * [2da5721] mini-buildd-rep.maintscript: Use the new "maintscript"
    facility of debhelper 8.1; fixes not-removed obsolete conffiles from
    0.8.
  * [7a336ec] Remove mbd-fake-pool and mbd-remove-pkg helpers:
    Obselete/harmful with reprepro/pool.
  * [abb79f4] lib/mbd-update-rep: Add support for release-signing via
    reprepro; obsoletes mbd-sign-release helper.
  * [a93e202] lib/mbd-update-rep: Regression 0.8: Make all dists
    "NotAutomatic" again; non-exp dists now have "ButAutomaticUpgrades"
    (this is different from 0.8).
  * [699f515] debian/control: Decide to narrow to sbuild >= 1.62.4,
    schroot >= 1.4.22 to ease ironing out compat issues.
  * [e5f38fc] examples: Add new examples dir; add initial entry
    mbd-test-cpp.
  * [a140ba4] Add examples/ directory; add 'mbd-test-cpp' test source
    package, and helper script.
  * [8ffaaad] lib/mbd-qa-check|update-bld: sbuild update fix: Put
    CCACHE_DIR env to .sbuildrc, not sbuild call.
  * [e3934e4] debian/*: Don't use "sbuild" as primary group for
    mini-buildd (but add a dedicated extra system group mini-buildd).
  * [0647cf2] *-common: Depend on bash (as nearly all scripts need it, and
    it's no longer mandatory in Debian).
  * [32b7f17] debian/mini-buildd-common.postinst: Use "bash" as default
    shell for user mini-buildd.
  * [e55bbc0] debian/mini-buildd-common.postinst: Always upgrade user
    mini-buildd to new setup w/o sbuild group.
  * [559fa79] debian/control: Fix overlong lines.
  * [57f3332] debian/control: logrotate no longer used, remove
    recommendation.
  * [a0e0573] examples/testbuild: Improve to support arbitrary id, base
    dist, target and auto-backports easily (new dist setup).
  * [5741b33] Update to new proposed distribution setup featuring
    experimental, unstable, testing and stable for each base distribution,
    with the latter two managed by manual migration only (see
    NEWS.Debian).
  * debian/mini-buildd-bld|common postinst/postrm: Use adduser (not
    sbuild-adduser), and userdel (not deluser).
  * .gitignore: Update for setup.py and debian/.
  * debian/mini-buildd-bld.postinst: Avoid adduser output conflict with
    debconf.
  * shellconf2python: Add coding && symlink to 'shell style' shell
    config to make it importable in python.
  * examples/testbuild: Dont check sig with dput for testbuilds.
  * daemon: Add a webserver thread running a django app.
  * Add initial django models.
  * Add initial urls for django webapp.
  * Add initial views for django webapp.
  * Add webapp settings, and embed in build system.
  * webapp: updatess, and directory layout change
  * webapp: various changes.
  * mini_buildd/options.py: Add option: '--home'
  * We don't need extra python symlink for old config.
  * mini_buildd/fixtures: Add initial set of fixtures.
  * mini-buildd: Use --home option for iwatcher.
  * mini_buildd/models.py: Several smaller model fixes.
  * Add support to import/export old 08x config with the admin
    interface.
  * debian/control: Add djange dep for -rep.
  * setup.py: Also install fixtures && templates.
  * mini_buildd/options.py: Add --instdir option.
  * mini_buildd/options.py: Add database --import/export options.
  * mini_buildd/options.py: console_log not used, removed.
  * mini_buildd/options.py: optparse: Use "count" for -v, -q.
  * mini_buildd/webserver.py: Diverse in webserver and django class.
  * mini_buildd/webserver.py: django: Add some preliminary admin
    commands methods.
  * mini_buildd/options.py: Remove support for daemon config file (we
    won't need this).
  *  mini_buildd/webserver.py: Use 'debug' for django class only.
  * mini_buildd/options.py: Don't use extra setDefaults call.
  * mini-buildd: Actual code for --import-db and --export-db.
  * mini-buildd: Rename --*-db to --loaddata, --dumpdata like in django
    admin; really complety implement them, and remove obsolste models.
  * mini_buildd/admin.py: Obsoleted: import/export 08x models.
  * mini_buildd/__init__.py: Add package import list to __init__.py.
  * mini-buildd: Update py code to new __init__.py.
  * mini_buildd/options.py: Some options fixes.
  * mini_buildd/options.py: Simplify logging code, put it all to
    options.
  * mini_buildd/options.py: Add --bind option, and set default port to
    8066 (iana-unassigned).
  * mini_buildd/webserver.py: Django: Always run syncdb on init.
  * mini_buildd/views.py: Add a /graph_models/ view (using django-
    extensions).
  * mini_buildd/*.py: Quoting fixes.
  * mini_buildd/webapp.py: Separate webserver && django app (webapp).
  * .gitignore: Ignore devel-home/
  * setup.py/version: Automagically get version from debian changelog.
  * *.py: Update all py code to encoding utf-8 according to PEP-0263,
    emacs style.
  * *.py: py cleanup: Fix all imports to be qualified.
  * mini_buildd/webapp.py: Fix: verbose=0 for syncdb.
  * mini_buildd/root_urls.py: Add workaround for squeeze/django 1.2
  * mini_buildd/options.py: Force django logging to user our logger
    config.
  * mini_buildd/webapp.py: WebApp: Use inheritance, not has_a.
  * setup.py: Update for qualified imports.
  * debian/*: Upgrade to dh_python2.
  * debian/control: Assorted fixes to dependencies.
  * mini_buildd/webserver.py: Add Django dev web server.
  * mini_buildd/fixtures/mini_buildd.default.json: Don supply a default
    fixture for now.
  * debian/control: b-d: Add missing python-debian (now used in
    setup.py).
  * mini_buildd/webapp.py: Put config to rep/, no need for extra web/
    directory.
  * lib/mbd-update-rep: bassh2py: Subdir prep.
  * lib/mbd-update-rep: bash2py: .mini-buildd/README.
  * lib/mbd-update-rep: bash2py: reprepro config.
  * mini_buildd/templates/mini_buildd/repository_detail.html: Fix for
    model change.
  * mini_buildd/models.py: Some more helpers.
  * lib/mbd-update-common: bash2py: GnuPG key generation.
  * mini_buildd/models.py: No longer limit Repository to one object.
  * mini-buildd: Re-enable reprepro signing.
  * lib/mbd-update-common: bash2py: dput.cf generation.
  * lib/mbd-update-common: We won be needing (even convenience) .profile
    patching support any more.
  * lib/mbd-update-common: bash2py: GnuPG pub key.
  * lib/mbd-update-rep: bash2py: Make setup dirs per-repo, and gen pub
    key auto key file.
  * mini_buildd/misc.py: bash2py: Add codename2Version (not yet deleted
    from bash lib).
  * mini_buildd/models.py: Add "mandatory_version" template field for
    suite.
  * model.py: Add repository.prepare(), move code from Main.
  * lib/mbd-update-rep-html: lib/mbd-update-rep-html: Remove converted/
    no longer needed.
  * mini_buildd/templates/mini_buildd/base.html: Add "Home"-Link to base
    template.
  * mini_buildd/templates/mini_buildd/repository_*.html: Remove some
    obsolete items, cleanups.
  * bash2py: mbd-update-rep-html.
  * mini_buildd/webapp.py: Fix: make sure db path always exists.
  * mini_buildd/models.py: Put ye-olde README to models, and fix path.
  * mini-buildd: Update watcht/installer to cope with multiple repos.
  * mini_buildd/models.py: Fix incoming path for reprepro.
  * mini_buildd/reprepro.py: Add initial reprepro abstraction.
  * Add development test runner script.
  * devel: Number of smaller fixes; add "generic" 08x.conf to import.
  * control: Add python-pygraphviz as rec-dep.
  * reprepro: Initial support to create reprepro repo automatically.
  * control, *: Initial update to use one binary package only; take *-
    common as template first.
  * Blind-Merge old binary package -rep into mini-buildd.
  * Blind-merge old binary package -bld into mini-buildd.
  * Update .gitignore for one binary package.
  * Initial fixups: Make the package build again.
  * Obsolete cron, and fixup some dependencies.
  * debian/*: Mass-fixes: debconf, package installation, reconfiguring.
  * Put config into top-level $HOME.
  * [cosmetics]
  * base.html: Template fixes.
  * Set up handling for initial 'admin' user and password updates.
  * fix: -v -v should not be default, but no options.
  * devel: Print command so we can just cnp it for debugging.
  * models: Update to the concept of Remotes, and local Builders.
  * Add support to create a default config on the fly.
  * devel: Some more fixes to the devel script.
  * Improce create_default function.
  * Add support for CherryPy as internal web server, and make CherryPy
    default.
  * some more debug log...
  * path, incoming_path: Use get()ers, not attributes.
  * schroot: Initial schroot impl; incorporate script mbd-setup-lvm.
  * debian/*: Remove now-obsolete lvm loop support.
  * Docs: Move all existing (old) docs to dir 08x/.
  * setup-chroots: Initial conversion of shell script.
  * install: Remove converted setup-chroots script, cleanups.
  * devel: Put test home to '..' to avoid problems with large files in
    the Debian Source Tree.
  * python: Switch from optparse to argparse.
  * Initail support for ftpd thread.
  * [cosmetic]
  * gitignore: Clean up and fix for test package upload cruft.
  * ftpd: Switch incoming queue to ftpd.
  * ftpserver: Add forgotten file for ftpd.
  * misc.run_cmd: Fix to throw exception on error, and update calling
    code.
  * lvm_loop, get_loop_dev: Fix to use realpath() on paths.
  * Remove support for --no-act argument.
  * Style cleanup: Don't use global "args." nearly anywhere (still left:
    models.py).
  * models: Fix: Don't use global args any more.
  * arguments: Move to mini-buildd main script completely.
  * Put log code to main, and use own loggers per module.
  * views: Fix wrong logging code.
  * Main() code cleanup.
  * Add explicit "debug" mode.
  * Don't try to configure django's logging for now (maybe good ;).
  * python module/class name cleanups.
  * ftpd: Coinfigure pyftpdlib to use mini_buildd logging.
  * fix: Remove left-over debug print call.
  * logging: Make formatter fit better after log renewal.
  * ftpd: Make files RO as soon as they arrive.
  * misc: Add little helper class to bind args, update http, ftpd.
  * ftp: Rename to IncomingFtpD, and fix default port.
  * ftpd: Use one ftpd on home with different perms for /incoming &&
    /repositories.
  * Obsolete installer+iwatcher in facvor of dispatcher / ftpd.
  * main, dispatcher: Initial support to gen build requests from source
    uploads.
  * incoming: Also queue *.buildrequest and *.buildresult files.
  * ftp upload support, builder stubs, update changes file handling.
  * obsolete two more scripts
  * Various code fixes in dispatcher.
  * dispatcher: Imporove spool_path handling. Add untar for build
    requests.
  * test package: Simplify, make work w/o ui-auto macros, run w/
    DH_VERBOSE.
  * test build script: Upload to current base dist per default.
  * test packages: Move to subdir examples/packages/.
  * testbuild script: automaticall chose fitting auto-backport dist.
  * devel script: Put default debug/test home to /tmp/.
  * Cleanup and improve the test builder script.
  * test build script: Always purge, add option to re-upload.
  * It builds again.
  * sbuild: Use subprocess directly.
  * models: Add lintian configuration options.
  * buildrequest: Support lintina mode.
  * builder: Add configured lintian support, and more builder clean ups.
  * Add globals.py. Use it for global DEBUG flag only initially.
  * builder: Create build results, and many other fixups.
  * Add new test package: mbd-test-archall.
  * builder: Gracefully handle skipped packages.
  * builder: Clean up sbuildrc. Add conf option Build-Dep-Resolver.
  * models, builder: Make build dep resolver configurable per
    repository.
  * builder, models: Support arch_all setting.

  [ Gerhard A. Dittes ]
  * mini_buildd/webapp.py, mini_buildd/schroot.py: add some
    documentation in order to be prepared for the introduction of
    Sphinx.
  * Added (customized) base files for Sphinx.
  * Add Makefile created by 'sphinx-quickstart' -- for convenience.
  * After years of searching... finally, we need 'python-setuptools' to
    build Sphinx-documentation in a comfortable way.
  * Sphinx: show mini-buildd logo.
  * Sphinx: show mini-buildd favicon.

  [ Stephan Sürken ]
  * devel script: Add 'clear', and rename 'reset' to 'purge'
  * devel: Fix: Forgot to update call for reset.
  * dispatcher: "Changes" refactor, buildrequest && buildresult file
    name fix ups.
  * buildresult: Only try to attach .tar when there is an arch.changes
    (fixes ftbfs).
  * test packages: Add "FTBFS" test package.
  * dispatcher: Fix path for repository spool dir.

  [ Gerhard A. Dittes ]
  * doc/conf.py: use version provided by "mini_buildd/__version__.py".

  [ Stephan Sürken ]
  * schroot: workaround for sbuild bug #608840: Get root via sudo.
  * changes.tar(): Support to add arbitary files to tar.
  * dispatcher: Initial support to bundle sources.list and preferences
    into build request.
  * typo fix.
  * models.py: Fix/impl. initial sources.list generation.
  * sbuild: Update sources.list+preferences via chroot-setup-commands.
  * compat08x.py: Fix call to new get_apt_line().
  * Obsoleted.
  * mini-buildd: Fix: Set global vars as early as possible.
  * misc: Add nop func.
  * ftpd.py: Clean up log init code; log: DEBUG level; logline: Ignore
    unless in debug mode.
  * devel: Run --verbose (not --debug) per default; mbd command line
    option may be given now.
  * misc.py: logs: Be less noisy.
  * dispatcher.py: Remove some obsoleted methods.
  * changes: Add untar() method.
  * reprepro.py: prcessincoming(): No need for CF file, just process
    all.
  * models.repository: Add reprepro object in constr., so it's always
    available.
  * dispatcher.py: Initially implement the actual repository install of
    buildresults.
  * misc.py: Fix Bind argument parser to work for IPv6 IP notation.
  * devel: Also remove repositories dir on clear now we actually
    install.
  * reprepro: Add prepare() method, and some minor cleanups.
  * Produce source package on arch-all host.
  * dispatcher: Some cosmetic and log fixes.

  [ Gerhard A. Dittes ]
  * Documentation: improved structure of 'index.rst'; "customized" use
    of 'apidoc' (what is part of sphinx >= 1.1) to automatically
    generate sphinx documentation (from files not containing dedicated
    documentation).
  * doc/conf.py: changed author name: "Stephano Vandamme" => "Mini-
    buildd Maintainers".

  [ Stephan Sürken ]
  * devel: Update (my) default mirror.
  * changes: Don't prefix "Buildresult-" and "Buildrequest-".
  * changes: Use "with" with tarfile in 2.6 using context module.
  * changes: Simplify upload(), remove check for file existence.
  * globals: Add set of global directory paths.
  * ftpd.py: Update to new global dirs.
  * main: Setup globals before log, and cleanup method names.
  * main: Clean up logging code; per default, log to 'file,syslog' now.
  * logs: Fix up daemon log file location.
  * dispatcher et.al: Update to new globals.
  * models: Rename "Builder" to "Chroot".
  * ftpd.py: Allow read-only access to "logs" dir.
  * ftpd: Make changes regex build-in as class attr.
  * models: New "Builder" model, update to schroot.
  * Add a "workarounds" setup to main, and add the sbuild key workaround
    there.
  * Integrate manual link.
  * Manual: Add TODO list to first page.
  * devel: Also re-generate sphinx doc in each run.
  * debian/mini-buildd.install: mbd-update-common, mbd-lintian, mbd-
    update-rep are no more.
  * debian/rules: Integrate sphinx manual in Debian package.
  * debian/rules: Improve clean target.
  * debian/mini-buildd.postinst: Always add mini-buildd to group sbuild.
  * mini_buildd/compat08x.py: No need at all for an export-to-08x
    function. removing.
  * dispatcher.py: Update todos.
  * webapp.py: Update todos.
  * mini_buildd/urls.py: Remove (already comented) compat 08x
    "public_html" static view for good.
  * mini_buildd/templates/mini_buildd/repository_detail.html: Update
    dput.cf.
  * schroot.py: Update todos.
  * mini_buildd/root_urls.py: Update todos.
  * models.py: Update todos.
  * doc: Add high level roadmap to top level manual.
  * mini-buildd: Running system workarounds in parallel.
  * doc: More status/roadmap updates.
  * misc.py: Add helper to get md5 hexdigest from file.
  * changes: Add add_file() method.
  * devel: Update "clear" for new paths.
  * debian/mini-buildd.install: Fix: Skip installing ye ole 08x schroot
    setup file.
  * mini-buildd: Put builder thread handling to main.
  * mini_buildd/*: Separate changes, builder and dispatcher into
    different modules.
  * devel: Add "clean" target.
  * schroot: Fix: Move schroot logik to class Chroot, remove schroot.py.
  * chroot: Use inheritance for chroot "backends".
  * devel: Make --debug --verbose --verbose default (again ;).
  * devel: Don't remove chroots on clear (this might remove active
    chroots).
  * mini_buildd/__init__.py: Don't implicitly import classes any more.
  * setup.py: Instead of __version__.py, generate __init__.py instead.
  * setup.py: Only __version__ in __init__; update all imports.
  * misc/noop: Use std convention args,kwargs.
  * misc.start_thread: Add support for args on run().
  * models, webapp: Move default creation completely to webapp.
  * devel: Add pre-code to purge that tries hard to remove lvm leftovers
    before actually purging dir.
  * builder.py: Move builder logic to builder.py.
  * mini-buildd: Actually use existing builder instances to start
    builder threads.
  * chroot: Single code out in own module.
  * repository: Single code out in own module.
  * chroot, models, repository: Clean up imports.
  * repository: Major bug fix: Plural.
  * chroot: Make filesystem configurable.
  * debian/control: python-setuptools must be b-d, not p-d.
  * debian/control: Add python-sphinx to b-d.
  * chroot: Add FileChroot stub, and impl get_backend.
  * chroot: Initial class cleanups.
  * chroot: Add generic prepare_schroot_conf method.
  * chroot.py: Personalities as class attr.
  * chroot: LVMLoopChroot: Add loop_size.
  * chroot: Cosmetics.
  * chroot: Initial impl of FileChroot.
  * doc: Add dummy django settings.
  * models.py: Cleanup some imports sphinx/autodoc seems to have
    problems with.
  * chroot: Move schroot.conf code from backends to Chroot.
  * file chroot: Make compression configurable.
  * chroot: Fix: filesystem is an option for lvmloop only.
  * chroot: Make dist,arch unique, so we cannot generate a duplicate
    chroot.
  * chroot: Add tmpdir function, and purge temp chroot for FileChroot.
  * builder: Put teh sbuild key workaround to the correct place.
  * builder: Put chroot prepare to correct place: The builder thread.
  * builder: Builder model does not need a list of chroots (we just use
    all existing chroots found).
  * builder: Forbid creating more than one instance.
  * devel: Use rm -rf on purge.
  * mini_buildd/builder.py: Cosmetics.
  * dispatcher: Make this a proper model, and handle like builder.
  * debian/mini-buildd-sudoers: Add support for sudoers config.
  * daemon: Daemonize early.
  * chroot: Fix uid name for sudo workaround.
  * .gitignore: Ignore egg-info dir create in Debian package run.
  * .gitignore: test upload script does not produce cruft any more.
  * base view: Remove deprecated broken browse repo link.
  * graphviz: dont break if praphviz is not installed.

  [ Gerhard A. Dittes ]
  * Sphinx: layout improvements; let apidoc create output beneath
    "build/sphinx" and let sphinx use it from there.

  [ Stephan Sürken ]
  * mini-buildd: Set up for new mini_buildd import style: "from
    mini_buildd import MODULE".
  * mini-buildd: Add temporary "startup" console log handler.
  * gnupg: Inital new gpg impl with "subprocess" only (not used yet).
  * mini_buildd/*: Update to new import scheme.
  * misc.py: Add initial new call() and call_sequence() (with rollback)
    functions.
  * misc.py: Obsolete get_cmd_output().
  * misc: call() wrappers: Loop arbitrary kwargs through.
  * builder.py: Update sbuild workaround to misc.call().
  * builder: Update debootstrap to misc.call().
  * chroot.py: Update FileChroot to misc.call().
  * chroot.py: LVMLoopChroot: Make snapshot size configurable.
  * reprepro.py: Update to use misc.call().
  * misc.py: call(): Improve logs.
  * devel: Add --one-file-system to rm -rf.
  * misc.py: call(): Fix/renice multiline logging.
  * chroot.py: LoopLVMChroot: fix get_lvm_device func.
  * chroot.py: Use call_sequence for lv creation and mount.
  * misc.py: Add support for empty sequents.
  * webapp.py: Simplify in-code selection of default chrot class.
  * devel: Purge should also remove any mini-buildd*.conf in
    /etc/schroot/chroot.d/
  * chroot.py: FileChroot: Update to new sequence-only scheme.
  * misc.py: call_sequence(): Support for rollback_only call.
  * misc.py: Add taint_env helper.
  * builder.py: Update to misc.taint_env().
  * builder.py: Better startup messages for builder.
  * mini-buildd: Clean up impports.
  * threads: Properly join dispatcher, builder, and build threads.
  * chroot.py: FileChroot: Correctly implement purge() with sequence
    rollback.
  * builder.py: Clean up logs; purge chroots on shutdown (for now).
  * misc.py: call(): Renoice log level for output log.
  * chroot.py: LVMLoopChroot: Completely update to new sequence calls.
  * misc.py: Obsoleting ye ole run_cmd helper.
  * chroot.py: Properly subclass LVMChroot + LoopLVMChroot.
  * chroot.py: Update all call paths to absolute path names.
  * debian/mini-buildd-sudoers: Harden to just the commands chroot.py
    actually needs.
  * chroot.py: Use long options wherever possible; fix mkfs call for
    sudoers.
  * misc.py: Add helper for to cinfigure logging for local modules
    tests.
  * gnupg.py: Fix up and simplify with new misc.call().
  * repository: Update to new gnupg class.
  * misc.py: call(): Log stderr to 'debug', not 'error'.
  * python: Use one-line imports for one context.
  * mini-buildd.templates: Per default, start mini-buildd with --verbose
    (log level INFO).
  * webapp.py: Depend on django 1.3, and fix up static files handling.
  * devel: Remove as root.
  * mini-buildd-sudoers: Fix: /bin/tar was missing.
  * setup.py: Fix: Install templatetags.
  * devel: Guess mirror from apt sources.
  * mini-buildd.postinst: Renice output when admin password is updated.
  * devel: Rewrite this to test with installed Debian snaphot packages
    only.
  * mini-buildd: Fix call order for httpd+ftpd; several cleanups.
  * mini-buildd: More Main() cleanups.
  * mini-buildd: ..more.. cleanups. Put daemonizer where it should be
    naturally.
  * Rename module "globals" to "setup".
  * builder.py: [indent fix]
  * debconf, MINI_BUILDD_OPTIONS: Fix: Only set from defaults file if
    configured there (and use commented default in default defaults
    file).
  * mini-buildd: Fix daemon run (again ;).
  * changes.py: save() does not need an extra file_path paramter.
  * devel: temporary workaround fpr purge.
  * devel: Also pre-seed options (--verbose --verbose --debug for now).
  * devel: Another workaround; add a handy "testall" target.
  * Rename "dispatcher"->"manager".
  * devel: extra func for default (may be used w/o git, just any mini-
    buildd installation).
  * packages.testbuild: Fix backort dis for sid.
  * builder.py: Bugix: changes values must always be string.
  * Move models graphic to documentation.
  * control: Add lintian to deps (currently needed until it can be run
    in chroots).
  * repository.py: Temporary fix to see the gnupg pub key.
  * doc/index.rst: Update status.
  * doc/index.rst: Add 0.8.x package migration task so we dont forget.
  * mini-buildd: Add todo-bug: umask/daemon.
  * devel: Fix magic mirror grep typo.
  * templates/mini_buildd/base.html: Show mini-buildd version.
  * Move gnupg handling to manager model.
  * models.py: Simplify name: PrioritisedSource->PrioSource.
  * devel: Add install_clean target.
  * models.py: New-style Architecture, Components (new) and Source
    models.

  [ Gerhard A. Dittes ]
  * devel: allow arbitrary branch to be used by 'mbd_build_install()'
    (not only master).
  * mini_buildd/changes.py: fix strange logging behavior (using
    unicode).

  [ Stephan Sürken ]
  * models.py: Introduce messages, and fix up arch/component adding.
  * index.rst: Add db schema upgrade todo.
  * models.py: Indent/cosmetic fixes.
  * chroot.py: Implement chroot prepare/purge as admin action.
  * webapp.py: Update defaults for new models.
  * admin.py: Register models where they are defined; obsoletes
    admin.py.
  * models: Prefix all mini-buildd methods with "mbd_".
  * repository.py: Simplify import line.
  * repository.py: Fix lintian mode descriptions.
  * repository.py: Add initial field set.
  * chroot.py: Use common action_activate and decactivate for objects
    that need it.
  * webapp.py: fix old method name.
  * misc.py: Add new function run_as_thread().
  * misc.py: Add syslog support for test log setup helper.
  * misc.py: Add more thread test code.
  * misc.py: run_as_thread(): Fix: Allow kwargs only.
  * mini-buildd: Upgrade manager to start_as_thread().
  * mini-buildd: Upgrade builder to start_as_thread().
  * mini-buildd: Don't enable verbose logging on --debug.
  * mini-buildd: Upgrade ftpd to start_as_thread().
  * mini-buildd: Upgrade httpd to start_as_thread().
  * misc: Better impl. of the sbuild workaround in misc: Add thread lock
    and work in temporary dir.
  * mini-buildd: Upgrade build runs to start_as_thread().
  * changes.py: Update workaround to encode unicode to utf-8 (str()
    fails on real unicode chars).
  * Merge Manager and Builder into Daemon.
  * devel: More fine changes ,,,, )
  * models.py: Initial generic status model.
  * source.py: Add source module with all models related to sources.

  [ Gerhard A. Dittes ]
  * Manual: add link "mini-buildd home" to our (Shinx) documentation.

  [ Stephan Sürken ]
  * models.py: New generic status handling and sctions.
  * chroot.py: Update to new generic status model.
  * models.py: Implement model action functions as ModelAdmin methods.

  [ Gerhard A. Dittes ]
  * webapp.py: do not explicitly set 'SITE_ID' -- as we provide only
    _one_ site, the default value (undefined) should be sufficient.

  [ Stephan Sürken ]
  * models.py: StatusModel: Generic impl. of activate/deactivate.
  * models.py: StatusModel: Add colored status display.
  * repository.py: Update to StatusModel.
  * mini-buildd: webapp.py: Implicit idempotent default model creation.
  * source.py: mbd_prepare(): Fix: Fail when no mirrors could be found
    (plus some log fixes).
  * mini-buildd: Remove obsolete/misleading arg "--instdir".
  * daemon.py, repository.py: Move hostname as "fqdn" to daemon.
  * daemon: Add a view for 'dput.cf'.

  [ Gerhard A. Dittes ]
  * webapp.py: Determine django's SECRET_KEY (once) instead of using a
    constant string (viewable by the public).

  [ Stephan Sürken ]
  * mini-buildd: As HOME_DIR is in setup as global now, use it.
  * models: "Implement" ordering on the admin site by using lexically
    ordered verbose names.
  * gnupg.py: Add generic base class, and a TmpGnuPG class.
  * chroot.py: Fix: Remove chroot superclass from admin.
  * source.py: Add gnupg/apt key automated download support.
  * Distribution model: Add 'components' part, and fixup __unicode__.
  * repository.py: Fix: apt_allow_unauthenticated field was missing from
    config fields.
  * builder, changes: Add support to deliver configured source's apt-key
    through to builds.
  * repository.py: Initial (wooden) support to deliver apt keys.
  * models: Move Suite, Layout and Distribution to module repository.
  * source.py: Source model: Structure, add some help strings, allow
    manual apt key.
  * repository.py: Remove now-obsoleted old 08x-style apt-secure config
    dirs.
  * repository, builder: Add support for debconf_preseed.
  * packages.testbuild: Update to host-based dput target, default
    repo=test.
  * Implement custom setup script support.
  * repository.py: Add example how to install additional packages.
  * main: Thread cleanup, part 1: Put queue to daemon model instance.
  * misc.py: Add get_cpus() helper.
  * builder: Upgrade renice daemon model, use builder thread, implement
    sbuild --jobs=N.
  * views.py: Use daemon.get() and clean up.
  * source.py: key retrieval: Use configured keyserver.
  * repository.py: Use daemon.get().
  * daemon.py: Mark private object vars with "_".

  [ Gerhard A. Dittes ]
  * httpd.py: Switch from CherryPyWSGIServer (standalone WSGI server) to
    CherryPy and pickup CherryPy's logging.

  [ Stephan Sürken ]
  * repository.py: fix gnupg call.

  [ Gerhard A. Dittes ]
  * WebApp: Enable processing of "static" files; Show "favicon.ico".

  [ Stephan Sürken ]
  * daemon.py: Initial impl. of Packager logic.
  * packages.testbuild: Be able to test-build any package that is
    available via apt-get source.
  * chroot model: Fix: Use Source, not Distribution.
  * source.py: [some cosmetics]
  * daemon.py: Success is when sbuildretval == 0 (no need to evaluate
    sbuild status).
  * mini_buildd/*: Name convention update: Don't use abbrevs in model
    field names.
  * daemon.py: Fix: convert retval to int.

  [ Gerhard A. Dittes ]
  * httpd.py: Log HTTP errors (status codes: 4xx-5xx).
  * WebApp: Let CherryPy handle static files (also for django admin).

  [ Stephan Sürken ]
  * mini-buildd.init: Add "reload" target, which send SIGHUP to mini-
    buildd.
  * ftpd.py: Add ability to shutdown ftpd at will.
  * daemon.py: Support for a global daemon instance called "runner".
  * mini-buildd: Add support for reloading (via SIGHUP).
  * daemon.py: Move ftpd thread to daemon.

  [ Gerhard A. Dittes ]
  * Manual/Sphinx: Use the "global favicon" (/static/favicon.ico)
    instead of an own (separate) one.

  [ Stephan Sürken ]
  * devel: Add new default target.
  * models, repository: Add EmailAddress models.
  * mini-buildd: Set umask on daemonize.
  * daemon.py: Initial smtp and email notification support.
  * mail: Alllow notificatio lists to be empty.
  * daemon.py: Initial pre-qa  testing, email updates.
  * daemon.py: mail/notify: Name all mail functions "notify" and put
    base notify to daemon.

  [ Gerhard A. Dittes ]
  * Static-files: Restructuring; Admin: Add link to mini-buildd's 'home'
    (show icon, etc.);

  [ Stephan Sürken ]
  * changes.py: Implement incoming QA-Checks: codename, id, dist,
    uploadable.
  * builder.py: Only sbuild --verbose when DEBUG is enabled.

  [ Gerhard A. Dittes ]
  * Website (mini-buildd): improve layout -- fulfill _valid_ "XHTML 1.0
    Transitional" and "CSS level 3".

  [ Stephan Sürken ]
  * Implement incoming QA-Checks: mandatory version.

  [ Gerhard A. Dittes ]
  * Manual: Let CherryPy deliver it _statically_ (instead of taking a
    circuit via Django);  Cosmetics.

  [ Stephan Sürken ]
  * suites/sources: Add support for automated "codeversions" (lenny=50,
    squeeze=60) from the Release file.
  * daemon.py: Implement email allow regex.
  * packages.testbuild: Set DEBEMAIL explicitly to protect against
    possible spam.
  * models.py: Add module doc including naming convention for fields.
  * Rename: PrioSource->PrioritySource.
  * Rename: PrioritySource.prio -> .priority.
  * models.py: Dox: Add method convention.
  * models.py: Cosmetic: Add plural for email adrresses.
  * Rename: extdocurl->external_home_url.
  * repository.py: build dep resolver field: Use small integer choices
    field.
  * repository.py: lintian mode field: Use small integer choices field.
  * repository.py: Add field placeholder for piuparts.
  * models.py: [cosmetics]
  * chroot.py: FileChroot: Cleanup, use "compression" shortint choice
    field, not tar_suffix.
  * chroot.py: Nameing conventions: Rename "vgname"->volume_group.
  * models.py: Misc cosmetic changes.
  * daemon.py: Rename mail_smtpserver -> smtp_server, and use BindArgs
    to parse host:port string.
  * source.py: Fox priority source verbose name.
  * repository.py: Impl. mail notification for repositories, including
    "maintainer" and "changed-by" notifying.
  * repository: Rename field id->identity (following naming
    conventions).
  * daemon: Rename field fqdn->hostname (naming conventions).
  * changes.py: Fix get() method.
  * daemon.py: misc notify fixes.
  * models.py: EmailAddress: Add name part.
  * daemon.py: Fix email sending of maintainer and changed-by fields.
  * models: __unicode__(): Actually use unicode everywhere, update all
    to .format().
  * Change file layout: "~/var/spool/builds|packages".

  [ Gerhard A. Dittes ]
  * mini-buildd (/CherryPy): Fix segfault on shutdown.
  * httpd.py: Turn stderr/stdout logging _off_.

  [ Stephan Sürken ]
  * changes.py: Use flat directories for builds and packages.
  * changes.py: Add remove() method.
  * builder.py: Implement build cleanup.
  * /builder.py: Fix: Build result changes should carry 'Architecture'.
  * daemon, changes: Implement package archiving to log dir.
  * Rename "var/logs" -> "var/log".
  * Make log dir accessible per http, and update repositor templatetags
    to 'mbd_' method prefix.
  * daemon, repo: Fix ftp url creation.
  * daemon.py: Add buildlog links to notify mail.
  * repository.py: Fix call to ftp_url.
  * doc/index.rst: Update todo index.
  * Some fixes to make sphinx build work in debian package under sid.
  * httpd.py: Fix path for static admin in django 1.4.
  * daemon.py: Fix: Architecture, not Sbuild-Architecture.
  * mbd-qa-check: qa lintian is implemented --removing.
  * mbd-qa-check: qa build check is implemented --removing.
  * mbd-qa-check: generic qa code is implemented --removing.
  * mbd-qa-check: qa dbp upload is implemented --removing.
  * mbd-qa-check: qa dsp upload is implemented --removing.
  * builder.py: log fixes.
  * misc.py: taint_env(): Add support to remove envs (via value=None).

  [ Gerhard A. Dittes ]
  * Improved (I hope so) and unified layout of "mini-buildd", "django
    admin" and "sphinx documentation".

  [ Stephan Sürken ]
  * builder.py: Show env in build on DEBUG.
  * Migrate mbdAptEnv() to python, and use it for debootstrap.
  * chroot.py: Don't include "apt" on deboostrap.
  * misc.py: call(): Log to error on failure.
  * builder.py: For arch-all builds, also always include the orig.tar.gz
    (-sa).

  [ Gerhard A. Dittes ]
  * Website: Use mini-buildd icon (as "fast-link") to get home (from
    everywhere).

  [ Stephan Sürken ]
  * misc.py: Add sha1 hash from file function.
  * Switch to using only one spool dir, with tasks imaged as sha1 dirs
    of the resp. changes file.
  * main: On daemonize, set working_directory to --home.
  * main: Always clear environment, and only set some HOME, USER,
    LOGNAME, and PATH to sane values.
  * Update all calls() with env=.
  * setup.py: sphinx workaround: Commenting copy for doc/_static.
  * css/mini-buildd.css: Minimal cosmetics.
  * ftpd.py: Add support to re-push left-over changes in incoming on
    startup.
  * builder.py: sbuild_mode: Don't explicitely set the default.
  * misc.py: Add new string helper funcs: fromdos() and
    subst_placeholders().
  * misc.py: Update this module to use doctest.
  * Add support for a custom "sbuildrc snippet" configuration.
  * repository.py: Update example for chroot_setup_script.
  * devel: Yet again, update default options: just '--verbose'.
  * misc.py: Add helper functions to parse a distribution string.
  * repository.py: Add mbd_find_dist() member, remove redundancies, more
    checks.
  * repository.py: Use new fromdos() utility func.
  * repository.py: Update "mandatory_version" regex to use new
    placeholders setup.
  * repository.py: sbuildrc_snippet: Introduce placeholder %LIBDIR%.
  * builder.py: Don't clean build dirs in DEBUG mode.
  * daemon.py: Initial handling of stray results.
  * repository.py: Rename: architectures -> mandatory_architectures.

  [ Gerhard A. Dittes ]
  * Admin: Website structuring & cosmetics.

  [ Stephan Sürken ]
  * builder.py: ups.

  [ Gerhard A. Dittes ]
  * Stylesheets (css): Fixed to pass "CSS level 3" (W3C Validator);
    Cosmetics.
  * Admin-Template: Some renamings (of model names).

  [ Stephan Sürken ]
  * repository.py: Add optional architectures field.

  [ Gerhard A. Dittes ]
  * Admin-Template: Remove "Suites" (from overview).

  [ Stephan Sürken ]
  * repository.py: Move archs, build, apt, lintian etc. opts to dist.

  [ Gerhard A. Dittes ]
  * Admin-Template: tiny cosmetics.

  [ Stephan Sürken ]
  * repository.py: Bette get_arch* methods, add clean() impl. (not
    active).
  * mini-buildd: Shwoi incoming signbal in level info.
  * mini-buildd: daemon: Implement arbitrary daemon start/stop for
    daemon model.
  * daemon.py: Fix up daemon __unicode__().
  * repository.py: Typo syntax error fix.
  * models.py: Add abstract father class for all models.
  * models: Protect _all_ models against changes while the daemon is
    running.
  * daemon.py: Fix dput.cf (fqdn, not hostname).
  * daemon.py: Fix up Daemon start/stop/restart coupling to actual model
    state.
  * repository.py: Bug fix in get_pubkey().
  * devel: Add arg for test.
  * daemon.py: Initial statis display support.
  * daemon.py: Mail fix: Only display buildlogs.
  * root_urls.py: remove obsoleted static files support.
  * changes.py: Fix Arch-All tag.
  * models.py: Revert back to changing status when we actually
    succeeded.
  * daemon.py: Don't rely on model status in Daemon object.

  [ Gerhard A. Dittes ]
  * Documentation: Add 'Quickstart' section.
  * Documentation: Tiny cosmetics.

  [ Stephan Sürken ]
  * devel: genaralize default argument.
  * daemon.py: status_as_html: Use functions to prepare builds and
    packages.
  * --debug: Make this comma-separated list of parts to enable debug
    mode.
  * mini-buildd: rm obsoleted commented code.
  * mini-buildd: Renice main error handling; add "main" part for debug.
  * builder.py: Fix build_clean call.
  * changes.upload(): Save upload status in *.upload; don't re-upload if
    already uploaded.
  * devel: Update default options for new --debug=x,y option.
  * changes, builder: Don't generate a build requests or build results
    (resp.) again if already done.
  * builder, changes: Convenience convention: "breq" for build request,
    "bres" for build result changes variables.
  * chroot.py: Make personality an automated model field with manual
    override feature.
  * conf.py: Enable graphviz extension, and add initial graphic for
    daemon.
  * builder.py: Introduce builder status class.
  * builder.py: Fix builder status display, and max_parallel_builds
    option.
  * repository.py: Move repo prepare code to repository && enable repo
    purge in debug mode "repository".
  * repository.py: mbd_prepare: Cleanup, remove obsoleted cruft.
  * Status models: Add confirmation support for admin action
    "unprepare".
  * repository.py: "normal" impl of repository unprepare now we have
    confirmation support.

  [ Gerhard A. Dittes ]

  [ Stephan Sürken ]
  * gnupg.py: Add gnupg.unprepare, renice messaging, and add
    daemon.unprepare.
  * gnupg.py: Add features: add_pub_key, sign, verify.

  [ Gerhard A. Dittes ]
  * Admin: Extend table style (-- bugfix for 'Debian Sid'/'Django').
  * Admin-Template: Move 'Daemon' from the bottom to the top.

  [ Stephan Sürken ]
  * daemon.py: Cleanup up repositoiry prepare, fix daemon reprepro call.

  [ Gerhard A. Dittes ]
  * Documentation: Extend Quickstart (administration section).

  [ Stephan Sürken ]
  * doc/index.rst: Update Roadmap status.
  * remove two done todos, update one.
  * doc/index.rst: Add some more hints for the quickstart.
  * webapp.py: Don't implicitely set up a source.
  * httpd.py: Explicitely set content type to 'text/plain' for '*.log'
    and '*.buildlog'.
  * doc/index.rst: More status updates.

  [ Gerhard A. Dittes ]

 -- Gerhard A. Dittes <gad@vandamme.ue.schlund.de>  Thu, 05 Jul 2012 14:37:59 +0000

mini-buildd (0.9.5) experimental; urgency=low

  * [28b9575] debian/mini-buildd-rep.init (LVM): Bugfix: Must not depend
    on lvm2 or schroot.
  * [8bf6e1c] debconf/mini-buildd.conf: Multiple sources are now separated
    via ",", not "\n".

 -- Stephan Sürken <absurd@debian.org>  Wed, 22 Jun 2011 15:19:01 +0200

mini-buildd (0.9.4) experimental; urgency=low

  * [30ac8cd] debian/control: Add missing ${python:Depends} for mini-buildd-rep.
  * [dd6ff20] lib/mbd-lintian: Fix: Always use --force-confold when updating/installing.
  * [3db4212] debian/control: b-d: Fix python-dep to >= 2.5, versioned only (omit alternates).
  * [506414c] lib/mbd-setup-chroots: Fix/update for schroot 1.4.22: Also configure 'root-groups' (seems now required to get non-interactive root).
  * [ac7209f] lib/mbd-qa-check: sbuild call fix: Even with --no-log, '--verbose' should be used to get all relevant logs to stdout/err.
  * [be3b1eb] mini-buildd: Use /usr/bin/python (not python2.5).
  * [734e594] mini_buildd/iwatcher.py: Fix: Use absolute path on initial incoming scan.

 -- Stephan Sürken <absurd@debian.org>  Wed, 15 Jun 2011 18:57:31 +0200

mini-buildd (0.9.3) experimental; urgency=low

  * Release with cumulated yet unreleased fixes in master:
  * [ce29072] lib/mbd-setup-chroots: Omit "priority" from schroot configuration.
    (Closes: 603913)
  * [88451eb] lib/mbd-qa-check: Auto-backports: Don't use "-vSINCE" option when SINCE is empty (i.e., one changelog entry only).
    (Closes: 603919)
  * [b57602b] debian/99mini-buildd: Don't log to stderr (as new schroot does not like it); fixes false-positive daily mails.
    (Closes: 604011)
  * [4bda519] debian/po/ja.po: New translation template for common.
    (Closes: 602154)
  * [9ba0ac0] debian/po/da.po: Ack NMU 0.8.15+nmu1. (Closes: 610078)
  * [d3869dd] Add support for wheezy (Debian 7.0).
  * [735d3c0] lib/mbd-qa-check: Fix auto-backports for 'epoched' packages.
    Thanks to Daniel Hermann (Closes: 609015)
  * [fe3740e] debian/control: Having support for wheezy, update dep on 1st debootstrap w/ wheezy support.

 -- Stephan Sürken <absurd@debian.org>  Tue, 14 Jun 2011 17:41:21 +0200

mini-buildd (0.9.2) experimental; urgency=low

  * [469d3f4] * debian/mini-buildd-bld.init: Fix bashism.
  * [6ae9f6f] * mini_buildd/iwatcher.py: Process incoming once on
    startup.
  * [5bb1ffd] Debconf templates and debian/control reviewed by the
    debian-l10n-english team as part of the Smith review project.
    (cherry picked from commit b9d683114752bbe8ea75d768a47abd6e5932bd14)
  * [1022acc] Debconf translation updates (cherry picked from commit
    290531124dd90919685e75c2d31200b438907cf4)
  * [35eae48] lib/mbd-qa-check+mbd-update-bld: Use "--nolog" command
    line (Closes: 588264) - thanks to Dominik Schulz
  * [913ccec] lib/mbd-setup-chroots: Remove run-setup|exec-scripts from
    schroot.conf: Obsoleted by schroot.
  * [11f24df] mbd-setup-chroots: schroot: Use extra config file in
    "chroot.d" instead of tainting schroot.conf directly.
  * [00a82db] mbd-update-bld: Update sbuildrc's 'pgp_options' format to
    sbuild 0.60 (plus compat for lenny)
  * [ae707d4] lib/mbd-common.sh: Update mbd sources list line to
    reprepro/pool.
  * [6f49d16] lib/mbd-update-rep: Update repropo indices.
  * [760fa54] debian/control: Fix: -rep and -bld binary packages must
    depend on the exact same -common version.
  * [ad1cf97] debian/control: Add deps for fakeroot, debhelper and cdbs
    on builder hosts; this will make auto-backports work out-of-the box
    for most packages.
  * [f436114] lib/mbd-qa-check: Update to changed bash4 subshell error
    handling.
  * [d6db45c] debian/control: Update to std-ver 3.9.1 (no changes
    needed).
  * [7565c5f] debian/po/cs.po: New translation template for common.

 -- Stephan Sürken <absurd@debian.org>  Mon, 16 Aug 2010 17:51:19 +0200

mini-buildd (0.9.1) experimental; urgency=low

  * [7a55102] * mini-buildd-rep.preinst: Fix: Manually remove obsoleted
    conffiles.
  * [7454852] * debian/mini-buildd-rep.init: Various fixes.
  * [d6ccc2f] * mini_buildd/iwatcher.py: Also watch for MOVED_TO events
    (fixes auto backports).
  * [94be418] * mini-buildd: Use env(HOME) for incoming path (was
    hardcoded).
  * [292f37a] * .gitignore: Add .gitignore; ignoring *.pyc.
  * [da084fd] * mini_buildd/installer.py: Fix: Set _preinstall var even
    if no script found.
  * [f9f835d] * mini-buildd: Use python-daemon to daemonize correctly
    (PEP 3143).
  * [495fc27] * debian/mini-buildd-rep.init: Make daemon options
    configurable via defaults.

 -- Stephan Sürken <absurd@debian.org>  Sat, 08 May 2010 18:06:34 +0200

mini-buildd (0.9.0) experimental; urgency=low

  * Initial 0.9.x unstable development release:

  * [2b39e2c] 20_debconf-presseed.hook: Typo fix.
  * [1e02a61] README.Debian: Add hints where logs go to.
  * [e229e45] debootstrap workaround (see discussion in Bug #562143):
    Always '--include=apt' when running debootstrap. Fixes base chroot
    creation for squeeze/sid.
  * [734b750] rules: Fix wrong rc.d installation of mini-buildd-bld init
    script (Fixes: 'no mini-buildd logical volumes after reboot').
  * [4627827] mbd-setup-lvm -a: Call vgchange after reattaching image
    file (fixes auto mode w/ LSB reboot).
  * [7b1c75f] Update to std-ver 3.8.4 (no changes needed).
  * [a12f4b5] Update to package format 3.0 (native).
  * [32eb24c] mini-buildd-bld.init: LSB: Add lvm2 to required start.
  * [2df62f5] mbd-preinstall: Add support to configure local hook for
    successful builds.
  * [cd5da02] Initial POC: Use reprepro, replace mini-dinstall by own
    daemon mini-buildd.
  * [8de7a48] mini-buildd-rep.cron.weekly: Now obsolete.
  * [cc5bcf4] mini-buildd-rep.logrotate: Now obsolete, removed.
  * [6692441] mini-buildd-rep.postinst: Rm db_stop hack needed for
    dinstall misbehaviour only.
  * [06a64bb] lib/*: Remove support for mini-dinstall config files and
    paths
  * [edaa4cc] * debian/README.Debian: Update for 1.0 development.
  * [2ee6b51] * debian/TODO:  Update for 1.0 development.

 -- Stephan Sürken <absurd@debian.org>  Wed, 31 Mar 2010 18:25:55 +0200

mini-buildd (0.8.8) unstable; urgency=low

  * Upload to unstable.
    In the future, 0.8.x "stable" branch will go to unstable, 0.9.x aka
    "reprepro" development will go to experimental.
  * [dc13594] README, TODO: Updates, make fit for a release to unstable.

 -- Stephan Sürken <absurd@debian.org>  Fri, 15 Jan 2010 13:51:42 +0100

mini-buildd (0.8.7) experimental; urgency=low

  * [eaef293] common: Extend the hilarious changes file parsing routine
    to work with
  * [2131d89] cron.daily: Add some more comments.
  * [437602e] cron.weekly: Add maintenance script doing a full reindex.

 -- Stephan Sürken <absurd@debian.org>  Thu, 14 Jan 2010 18:50:35 +0100

mini-buildd (0.8.6) experimental; urgency=low

  * [a22a1ba] Adding utility mbd-fake-pool: Workaround to use Debian-
    style sources
  * [bdbefe4] Fix all scripts that need it from /bin/sh to /bin/bash;
    this ixes script failures on systems where sh is not bash (like on
    sid per default).
  * [8d59a84] Try to detect errors on daily cron script; only sent mail
    on errors.
  * [bd72445] Update Std-Ver to 3.8.3 (no changes needed)
  * [4dd5208] control: Depend on bsd-mailx | mailx, not just mailx
    (which is now virtual)

 -- Stephan Sürken <absurd@debian.org>  Tue, 12 Jan 2010 18:58:25 +0100

mini-buildd (0.8.5) experimental; urgency=low

  * [1f2861b] control: Fix maintainer name.
  * [820f1c7] copyright: Add "Source" URL pointing to the Debian pool
    (being Debian native).
  * [4bcfb0d] Support squeeze

 -- Stephan Sürken <absurd@debian.org>  Fri, 06 Nov 2009 18:31:51 +0100

mini-buildd (0.8.4) experimental; urgency=low

  * control,copyright,README.Debian: Updates.
  * Moving vcs to alioth+git+collab-maint; add VCS headers to control.
  * control: Fix section to devel (was non-free/devel).
  * control: Update stds-ver to 3.8.2 (no changes needed).
  * init: Don't fail if default file is not there.
  * control: -bld: Add note that the repository host must be set up first.
  * -rep tpl: Add caveat note about httpd userdir support.
  * Initial upload to experimental (Closes: #537721).

 -- Stephan Sürken <absurd@debian.org>  Tue, 28 Jul 2009 15:25:57 +0000

mini-buildd (0.8.3~uiSID+1) sid-ui; urgency=low

  [ Stephan Sürken ]
  * Bugfix: Backport mode, magic versions: Replace only the nonrevision
    part like '~id50+' (~id50+5 -> ~id40+5); formerly, only versions with
    default revisions (0,1) worked correctly.
    Thx Henning for reporting this...

  [ Automated changes by ui-auto-release ]
  * New Debian package based on 0.8.3 (stable): Reusing UNRELEASED
    section formerly versioned 0.8.3
  * MINI_BUILDD: AUTO_BACKPORTS: lenny-ui

  [ Stephan Sürken ]
  * ui-auto-release run by absurd@manwe.use.schlund.de.

 -- Stephan Sürken <stephan.suerken@1und1.de>  Tue, 16 Jun 2009 15:50:10 +0000

mini-buildd (0.8.2~uiSID+1) sid-ui; urgency=low

  [ Stephan Sürken ]
  * Harden backports mode:
    - If user gives duplicate bpo dist, (silently) only use one.
    - If user gives same dist as orig upload, warn and skip.
    - Put Backports qa check as last element of postbuild (was: build).
      Avoids backport creation even though the original package failed due
      to some qa check _after_ "build".

  [ Automated changes by ui-auto-release ]
  * New Debian package based on 0.8.2 (stable): Reusing UNRELEASED
    section formerly versioned 0.8.2
  * MINI_BUILDD: AUTO_BACKPORTS: lenny-ui

  [ Stephan Sürken ]
  * ui-auto-release run by absurd@manwe.use.schlund.de.

 -- Stephan Sürken <stephan.suerken@1und1.de>  Wed, 03 Jun 2009 11:08:08 +0000

mini-buildd (0.8.1~uiSID+1) sid-ui; urgency=low

  [ Stephan Sürken ]
  * lintian: Ignore some new lintian version checks:
     maintainer-upload-has-incorrect-version-number
     binary-nmu-debian-revision-in-source
     binary-nmu-uses-old-version-style
  * Better names for local customization dirs.

  [ Automated changes by ui-auto-release ]
  * New Debian package based on 0.8.1 (stable): Reusing UNRELEASED
    section formerly versioned 0.8.1
  * MINI_BUILDD: AUTO_BACKPORTS: lenny-ui

  [ Stephan Sürken ]
  * ui-auto-release run by absurd@manwe.use.schlund.de.

 -- Stephan Sürken <stephan.suerken@1und1.de>  Wed, 27 May 2009 16:20:47 +0000

mini-buildd (0.8.0~ui50+1) lenny-ui; urgency=low

  * Backport for lenny-ui (no changes).

 -- Stephan Sürken <stephan.suerken@1und1.de>  Mon, 25 May 2009 13:37:39 +0000

mini-buildd (0.8.0~uiSID+1) sid-ui; urgency=low

  * 0.8.x summary: Most important changes:
    - auto-backports mode.
    - base chroot maintenance via hooks (predefined+custom).
    - apt-secure support.
    - apt_preferences support.
    - a lot of testing and bug fixes.
   A more detailed albeit confusing changelog below;).
  * qa-check Build: Don't warn when no packages to build for arch.
  * Fix: Use /usr/share (not /usr/lib) for mini-buildd lib.
  * mini-buildd-common.postinst: Don't call sbuild-adduser with full path
    [W:lintian]
  * Override lintian error for missing config script for -common.
  * init: Add "reindex" target.
  * Implement Auto-Backports via new qa-check "Backports".
  * Chroot-Hooks:
    - New "local config" directory "~/.mini-buildd" on repo, copied by
      builders:
      - README file added with detailed instructions.
      - apt-secure/: Extra apt keys.
      - chroots-update.d/: Custom.
    - New dir: /usr/share/mini-buildd/chroots-update.d/, used by
      mbd-update-bld.  Hooks added:
      - 05_apt-secure: apt-secure keys handling.
      - 10_apt-upgrade: upgrade, install extras, autoremove, clean.
      - 20_debconf-preseed: set debconf variables.
      - 70_bug327477: bug workaround.
  * Base distribution sid: Add forced version "~idSID"; formerly, sid
    wasn't restricted which may lead to conflicts with versions in real
    Debian "sid"
  * mini-buildd-bld: Add "defer" configuration support, and hardenend
    Debian configure/install scripts; fixes some known hen/egg problems on
    initial installs.
  * -rep: Set debconf dist default to lenny (was etch).
  * -bld: Bugfix: Fix error recognition on initial chroot setup
    (debootstrap).
  * -bld: Bugfix: Run deboostrap with DEBIAN_FRONTEND="noninteractive".
  * Add support for prio configuration per source (/etc/apt/preferences).
  * chroots-update.d: 10_apt-upgrade: Only run autoremove for apt versions
    that support it; avoids unecessary warnings.
  * apt-secure support:
    - chroots-update.d: 05_apt-secure: Added; you may now add arbitrary
      locally configured keys here.
    - Add new config options "mbd_apt_allow_unauthenticated", make it
      configurable via debconf and add support for sbuild.conf.
  * control: Update to standards version 3.8.1 (no changes needed).
  * mbd-setup-chroots: Fix/workaround debconf failures on reconfigure.
  * -rep|bld.config: Fix: Add some missing debconf default values.
  * mbd-setup-chroots: Add fs type to schroot mount options so we don't
    depend on auto-detection.
  * mbd-remove-pkgs: Use -wholename rather than -name for find.

 -- Stephan Sürken <stephan.suerken@1und1.de>  Mon, 25 May 2009 13:33:06 +0000

mini-buildd (0.7.13~ui40+1) etch-ui; urgency=low

  * Backport for etch-ui.
  * MINI_BUILDD: BACKPORT_MODE

 -- Stephan Sürken <stephan.suerken@1und1.de>  Tue, 30 Dec 2008 15:32:19 +0000

mini-buildd (0.7.13~ui50+1) lenny-ui; urgency=low

  * mbd-lintian: Pre-run apt-get update to avoid warnings.
  * rules/control/compat: Update to debhelper 7, minimize rules file.
  * mbd-common.sh: Be more smart about MBD_LIB to ease testing scripts
    from svn.
  * mbd-remove-pkg:
    - Complete tool and harden it against misuse.
    - Actually install this tool to -rep package.

 -- Stephan Sürken <stephan.suerken@1und1.de>  Tue, 30 Dec 2008 15:20:40 +0000

mini-buildd (0.7.12~ui40+1) etch-ui; urgency=low

  * Backport for etch-ui.

 -- Stephan Suerken <stephan.suerken@1und1.de>  Wed, 10 Dec 2008 10:46:13 +0100

mini-buildd (0.7.12~ui50+1) lenny-ui; urgency=low

  * Upgrade sbuild dependency to latest in testing/lenny: 0.57.7.
  * apt-secure: Fix for sbuild 0.57.5:
    - Set apt_allow_unauthenticated = 1 in mini-buildd for now.
    - Add @todo for later:[brain] Make sbuild apt_allow_unauthenticated
      configurable via debconf; add some infrastructure to add keys when
      entering chroots, and some way to manage keys.
  * control: Update to standards version 3.8.0 (no changes needed).
  * mbd-update-bld: Add --purge to autoremove run.
  * 99mini-buildd (schroot setup): Fix: Honor AUTH_VERBOSITY for the one log
    left in the script.
  * Add tool "mbd-lintian": Install lintian and run tests in separate snapshots.
    - mbd-qa-check: Use mbd-lintian for lintian check.
    - mbd-common: Remove "lintian" from list of extra packages for source chroots.
    .
    Note: Having lintian removed from the extra packages list means that source
    chroots can now be really minimal (lintian pulled in quite some dependencies)
    (except for ccache, that is). This solves two problems:
    .
    - Source dependency check not tainted by lintian+dependencies any more.
    - Already installed packages wont be upgraded by sbuild, breaking package
      builds that need updated versions of installed lintian dependencies.
    .
    To gain these advantages, you need manually regenerate your chroots on all
    build hosts; as root run
    .
    /usr/lib/mini-buildd/mbd-setup-chroots -f
  * schroots: Use "-o noatime,user_xattr" instead of the default "-o
    atime,sync,user_xattr"; this may speed up things greatly on certain systems.

 -- Stephan Suerken <stephan.suerken@1und1.de>  Wed, 10 Dec 2008 10:44:12 +0100

mini-buildd (0.7.11~ui40+1) etch-ui; urgency=low

  * Backport for etch-ui.

 -- Stephan Suerken <stephan.suerken@1und1.de>  Mon, 08 Dec 2008 15:56:16 +0000

mini-buildd (0.7.11~ui50+1) lenny-ui; urgency=low

  * html: Show new build options, and some cosmetics.
  * lintian exceptions: Exclude more "unknown distribution" errors.
  * syslog: Log to facility user, not daemon.
  * ccache fix: Give CCACHE_DIR explicitely as environment for sbuild (some
    build system change $HOME for whatver reasons (e.g., package "subversion"'s
    test suite does), effectively disabling gcc.
  * Add mini-buildd control feature via changelog entry:
    * MINI_BUILDD: <CONTROL_OPTION>
    Currently, we support BACKPORT_MODE only; this comes handy for
    lintian-buggy package backports.
  * copyright: Making this DFSG compatible, license GPL-2+.
  * copyright: Update to proposed formal format.
  * mbd-update-bld: Also run "apt-get autoremove" (errors ignored for when not
    supported) for source chroot update.

 -- Stephan Suerken <stephan.suerken@1und1.de>  Mon, 08 Dec 2008 15:53:35 +0000

mini-buildd (0.7.10~ui40+1) etch-ui; urgency=low

  * Rebuild for etch.

 -- Stephan Suerken <stephan.suerken@1und1.de>  Thu, 21 Aug 2008 18:08:11 +0200

mini-buildd (0.7.10~ui50+1) lenny-ui; urgency=low

  * Debian and external doc links support in overview html for convenience:
    - README.Debian: Initial proper version.
    - TODO: Rename from TODO.Debian so dh_installdocs picks it up.
    - -rep: Add external doc URL support (variable && debconf).
    - -rep: Add documentation section in overview html:
     - Add link to dwww URL of package docs.
     - Add "Recommends" for dwww.
     - Add link to external docs where configured.
  * DEB_BUILD_OPTIONS support for builds:
    - -rep: Add DEB_BUILD_OPTIONS for all archs (var+debconf).
    - QA build: Add DEB_BUILD_OPTIONS support for sbuild call.

 -- Stephan Suerken <stephan.suerken@1und1.de>  Thu, 21 Aug 2008 17:59:10 +0200

mini-buildd (0.7.9~ui40+1) etch-ui; urgency=low

  "Make lenny lintian happy" release.

  * Add po-debconf support; Set strings in -common translatable
    (nothing else yet). Required for lenny and up.
  * Cosmetic fixes in control (lintian warnings).
  * Fix copyright file (lintian warnings).
  * Add LSB sections for both -rep and -bld init scripts.
  * Explicitly use "bash" for *.config scripts, as we use bash addons. 
  * rules: Fix: Swap arch and indep targets.

 -- Stephan Suerken <stephan.suerken@1und1.de>  Fri, 08 Aug 2008 16:26:40 +0200

mini-buildd (0.7.8~ui40+1) etch-ui; urgency=low

  * Add numeric version support for lenny (5.0). 

 -- Stephan Suerken <stephan.suerken@1und1.de>  Fri, 08 Aug 2008 11:36:08 +0200

mini-buildd (0.7.7~ui40+1) etch-ui; urgency=low

  * logrotate: Redirect stdout to /dev/null for restart (avoids unnecesary
    mails from cron).

 -- Stephan Suerken <stephan.suerken@1und1.de>  Thu, 17 Jul 2008 16:21:41 +0200

mini-buildd (0.7.6~ui40+1) etch-ui; urgency=low

  * cron.daily: Fix: If package is removed, but not purged, exit silently.
  * preinstall: On FTBFS, don't auto-retry, but move DSP to directory FTBFS
    in logs (like for REJECT). Hint to re-upload to retry.
    Note: Former behaviour makes sense for missing dependencies that will
    eventually be fullfilled after another build; however, real life shows
    that the reason is just a plain error in the package for nearly all cases,
    so it does not really do anything useful but spam us.

 -- Stephan Suerken <stephan.suerken@1und1.de>  Wed, 16 Jul 2008 13:32:42 +0200

mini-buildd (0.7.5~ui40+1) etch-ui; urgency=low

  * Adapt package to changes now applied to mini-dinstall 0.6.25/debian:
    - mbd-update-rep: Remove "apt_ftparchive_usecache = 1" (in the debian
      package's patch, this can not be configured).
    - mbd-update-rep: Change release_notautomatic to experimental_release
      (name chaged in the debian package's patch).
    - mbd-cruft: Add all ".cache.db" under rep/ for removal
      (other location/name used the debian package's patch).

 -- Stephan Suerken <stephan.suerken@1und1.de>  Thu,  3 Jul 2008 17:14:41 +0200

mini-buildd (0.7.4~ui40+1) etch-ui; urgency=low

  * Add support for db cache for apt-ftparchive (speeds up index updates);
    - Needs mini-dinstall_0.6.25~ui40+0abgit6 (nop if not installed).
    - mini-dinstall.conf: Add new option.
    Fixes: @todo [mini-dinstall] Need speed increase for index file creation:
    http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=225483
  * .mini-dinstall.conf: chown_changes_files = 0.
    Fixes: @todo [mini-dinstall] Changes files not readable for public.
  * .mini-dinstall.conf: keep_old = 0 for *-experimental releases (i.e., only
    keep newest version).
  * standard dist: Make 1-9 start revision mandatory for versions
    Example: "~mbd40+1".
    experimental dist: Make a zero start revision mandatory for versions
    Example: "~mbd40+0".
    [ Usually, experimental uploads should look s.th. like "1.2-1~mbd40+0exp1"
      so that a "normal" upload "1.2-1~mbd40+1" will always have a higher version. ]
  * Cleanup, purging some obsolete functions: mbdCheckVersion.

 -- Stephan Suerken <stephan.suerken@1und1.de>  Wed, 11 Jun 2008 11:01:14 +0200

mini-buildd (0.7.3~ui40+1) etch-ui; urgency=low

  * Minor cleanup release.
  .
  * QALintian: Yet one more to ignore: source-nmu-has-incorrect-version-number.
  * -bld: Some typos fixed in debconf template.
  * setup-chroots: Add linux personality support for schroots; i386=linux32 only
    for now. [Needed for multiarch builds, i.e. build i386 under amd64].
  * Harden /etc/init.d/mini-buildd-rep:
    - Depend on procps.
    - Don't fail if started when already started.
    - start/stop: Check for pids instead of just sleeping 5 secs.
    - stop: Hard kill after 20 seconds if normal shutdown fails.
    - ... and reniced output.

 -- Stephan Suerken <stephan.suerken@1und1.de>  Thu,  5 Jun 2008 16:57:54 +0200

mini-buildd (0.7.2~ui40+1) etch-ui; urgency=low

  * Fix fix for mbd-update-bld ;(.

 -- Stephan Suerken <stephan.suerken@1und1.de>  Wed,  4 Jun 2008 13:22:14 +0200

mini-buildd (0.7.1~ui40+1) etch-ui; urgency=low

  * Minor bugfix release.
  .
  * mbd-preinstall: Fix path to changes file on arch build.
  * mbd-update-bld: Use "-o APT::Install-Recommends=false" for apt-get when
    updating the basis chroots (since apt 0.7.7, recommended packages are
    installed per default).
  * Cosmetics: Fix var order in mini-buildd.conf.
  * QALintian: Fix for ignore pattern: Omit trailing space.
  * .mini-dinstall.conf: Regression: Re-add arch "all".

 -- Stephan Suerken <stephan.suerken@1und1.de>  Wed,  4 Jun 2008 12:54:12 +0200

mini-buildd (0.7.0~ui40+1) etch-ui; urgency=low

  * **Happy chroot release**
  .
  * bld: New chroot management:
    * bld/chroots: New layout for the sources.lists to use in chroots:
      DIST/base.any.list     1x: Sources for the base dist (any arch).
      DIST/base.ARCH.list    nx: Sources for the base dist (special archs).
      DIST/mbd.any.list      1x: Sources for the mbd repository (any arch).
      DIST/extra.any.list    1x: Extra sources (any arch).
      DIST/extra.ARCH.list   nx: Extra sources (special archs).
      No extra files involved; all configured on -rep in ~/.mini-buildd.conf.			
    * Add hook for schroot: /etc/schroot/setup.d/99mini-buildd:
      * Automates creation of sources list on chroot creation.
      * Allows different sources.lists for -source or build chroots (snapshots),
        and for snapshots between standard and experimental.
      * Auto-updating of apt cache.
    * mbd-update-bld: Update to new layout (no arch support yet).
    * mbd-cruft: Add now-obsolete files under chroots to cruft.
    * setup-chroots: rename lv names for chroots: DIST-ID to mbd-DIST-ID-ARCH. The prefix
      makes more clear what the lvs are for, avoids lv-namesspace pollution;
      the arch postfix allows multiarch chroots on on bld host (e.g., amd64+i386).
    * preinstall, QABuild: Support for multiarch:
      - Temporary build dir now has additional -ARCH suffix.
      - Run checks/builds per arch, not per build host.
    * Update to sbuild 0.57.2 (we need the --chroot option).
    * Update to sbuild 0.57.3 (we need a bug fix from that version).
    * debconf: Adapt to new chroot management:
      * mini-buildd.conf: +"mbd_archs", ask for the bld host for all archs, write to +"mbd_bldhost_ARCH".
      * mini-buildd.conf: +"mbd_src_DIST_base_any", ask for special arch source for all archs, write to +"mbd_src_DIST_base_ARCH".
      * mini-buildd.conf: +"mbd_src_DIST_extra_any", ask for special arch source for all archs, write to +"mbd_src_DIST_extra_ARCH".
      * mini-buildd.conf: -"mbd_bldhosts" (obsoleted).
      * mini-buildd-rep.conf: -"mbd_debian_mirror" (obsoleted).
      * Fix all defaults/on-the fly defaults. In a standard install with default values,
        you now get a working buildd for localhost's native arch called etch-`hostname`.
      * rep+bld postinstall: Update to new debconf scheme. 
      * 99mini-buildd: Update to new debconf scheme.
      * new cruft added: bld/chroots/*/*.
      * Remove all bld extra file logs (lvm setup, chroot setup, chroot update), use
        MBD_LOG instead (=> continuous logging, no worry about rotating, etc).
      * new cruft added: All logs under bld/chroots/.
      * lib/*: Update to new syntax of mbd_dists.
      * mbd lib: New generic function mbdGenSources (moved from 99mini-buildd) to generate
        sources lists on the fly.
      * bld config: Add mbd_bldhost ID; suck rep config in config, and add dynamic selection question.
      * Update all lib/*.
      * setup-chroots/schroot.conf: Write two configs, one more for -experimental; else we can't
        distinguish in schroot setup.
      * Dynamic sources list support for *-experimental.
      * Updated html overview page:
        - Support to show -expermiental.
        - Show buld dependencies.
        - Detailed view via js.
        - Fix HTML to validated HTML.
      * update-rep: Fix for multiarch: Only run update-bld per bld host, not arch.
    * Update dep to mini-dinstall >> 24 (0.6.25 private git branch currently):
      - mini-dinstall.conf: Add release_notautomatic = 1
    * .sbuildrc: Add apt_policy=1, so we can satisfy dependencies via all sources we added.
    * Add "ccache" support (add path to .sbuildrc, add ccache to extra packages).
    * update -bld prerm (lvm) for new setup.
  .
  * Miscellaneous:
    * control: Depend on mini-dinstall >> 0.6.23 (ui-etch-bpo available). Fixes
      @todo [mini-dinstall] Allow apt-get update during index generation: http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=324855 (NMU fix unstable).
      , among other things.
    * cron: Send output of nightly updates to configured mail address. Fixes
      @todo cron: MAILTO (?).
    * sbuild: Set sbuild_mode to user; simplifies error handling in "build" qa test.
    * Fix: Add "build-essential" to list of extra packages for base chroots; this is
      needed because since dpkg-1.14.16, this is checked and hence a requirement for
      package building.
      Compare:
      - http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=402901
      - http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=480638
    * update-bld: Fix: For chroot updater, add DEBIAN_FRONTEND="noninteractive" env to avoid
      any debconf questions: Fixes
      @todo [chroots]: Sarge && debconfig non-interactive per default?
    * Fix: .sbuildrc must have "1;" at end ("perl needs this".)
    * .sbuildrc: put all generic options to .sbuildrc.
    * QACheckNew: Fix for experimental: If dist is -experimental, we
      should also check non-experimental and vice versa.
    * QACheckOrig: Fix for experimental: If dist is -experimental, we
      should also check non-experimental and vice versa.
    * -rep: Note after configuration; show URL and important notes.
      Fixes: @todo [deb] For -rep: debconf finals: Note that points to mini-buildd overview URL.
    * QACheckLintian: Ignore "menu-item-creates-new-root-section": for lintian <= etch, this is
      an ERROR, but imho should be a WARNING only, and not let builds fail.
    * QACheckLintian: Ignore "changelog-should-mention-nmu": Does not make sense for mini-buildd.
    * Autobuild binary packages *.changes files will now be signed with our GPG key.
      Fixes: @todo GPG signing of auto-build packages.
    * Rotating support for the mini-dinstall.log file:
      - Recommend logrotate (rep+bld).
      - Add logrotate.d for rep: weekly/5; restart after rotating.
    * Add debconf note for *-common in postrm: Warn before purging user mini-buildd if it
      has a repository.
      Fixes: @todo [deb] Warn before purging package && repository.
    * setup-chroots: Fix: Remove temporary schroot conffile.
    * setup-chroots: Add -d "delete" option (analogous to setup-lvm).
    * setup-lvm: Fix for -d "delete": Also remove pv via pvremove.
    * -bld, prerm:
      - Call "setup-chroots -d" on "remove" (removing redundant code).
      - Call "setup-lvm -d" on "remove" (new feature: auto-lvm removal).
    * -common: postrm: make it (more) idempotent.
  .
  * Items from TODO.Debian fixed by (above) structural changes:
    - @todo *-experimental: Integrity checks.
    - @todo [brain] Minimal dependency building.
    - @todo [schroot] Depend on schroot 1.1.4 (http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=391319). No bpo yet.
    - @todo Support for more than one arch in one bld-host.
    - @todo Apt cache of build chroots should be updated before each build run.
    - @todo HTML overview: Update for *-experimental.
    - @todo HTML overview: Update for new chroot setup (sources lists).
    - @todo [mini-dinstall] Experimental (Non-Automatic) support: http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=336232
    - @todo [deb] rep,bld: Current: manually edit file ${ID}.sources.list.extra on -bld for extra sources list (e.g. bpo);
      make this generically configurable via debconf in -rep.
    - @bug  [auto-lvm/deb]: When installing -bld only, setup-lvm is called before update-bld, and hence fails:
      /usr/lib/mini-buildd/mbd-setup-lvm: line 4: /home/mini-buildd/.mini-buildd.conf: No such file or directory
    - @todo [auto-lvm]: Debug problems on initial setup.
	
 -- Stephan Suerken <stephan.suerken@1und1.de>  Tue,  3 Jun 2008 10:49:54 +0200

mini-buildd (0.6.5~ui40+1) etch-ui; urgency=low

  * Fix: Add verify_sigs = 0 to .mini-dinstall.conf (defaults to 1 when debian-keyring package
    is installed; we don't want this enabled ever at the moment.
  * Fix: Ignoring lintian error "no-description-in-changes-file": since dpkg 1.4.16: Changes
    files in source only uploads have no description field any more.

 -- Stephan Suerken <stephan.suerken@1und1.de>  Fri, 25 Apr 2008 17:36:25 +0200

mini-buildd (0.6.4~ui40+1) etch-ui; urgency=low

  * Per dist, add new distribution "*-experimental". This ist NOT staging,
    but really just yet another repository. Packages uploaded to experimental
    will always stay there, seperately; it just uses the same framework
    to build packages, a new upload to "*" is needed to get it to the
    actual distribution.
    Note that *-experimental distributions can not yet satisfy build-deps
    from themselves.
  * Smaller enhancements:
    - In mails, always give distribution; most notably, to see what packages
      are uploaded to experimental.
    - mdb-setup-chroots: Change chroot fs type to ext2 (was ext3 ?!);
      we really have no need for journalling here. May speed up things
      somewhat.
    - *-bld/debconf: Put mirror and lvm setup items to high prio (was
      medium); you almost always want to change these.
  * Bug fixes:
    - mbd-update-rep-html, mbd-update-bld: Make some logger lines
      that may have empty args not wait on input. Fixes some update
      scripts just idling around (under sid's logger version).
    - schroot.conf: Increase snapshot size to 4G (was 2G). This will
      workaround the phenomena described in
      http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=471545

 -- Stephan Suerken <stephan.suerken@1und1.de>  Wed, 19 Mar 2008 19:21:09 +0100

mini-buildd (0.6.3~ui40+1) etch-ui; urgency=low

  * preinstall: Cosmetic: Show arch on postbuild check notice "no changes".
  * qa-check: UploadDSP: Cosmetic: Don't use -v for scp.
  * common: Fix mbdParseCF for inline PGP signatures.
  * qa-check: Fix typo in uploadDSP, breaking orig.tar.gz-from-rep upload.

 -- Stephan Suerken <stephan.suerken@1und1.de>  Thu,  6 Dec 2007 13:34:50 +0000

mini-buildd (0.6.2~ui40+1) etch-ui; urgency=low

  * mbd-preinstall/postbuild: Fix: Only run if changes file is present (if there is no package to build).
  * mbd-common.sh: Cosmetic: Make the internal error status text BIG.
  * mbd-qa-check: Cosmetic: No need to clean any files after remote tests.

 -- Stephan Suerken <stephan.suerken@1und1.de>  Wed,  5 Dec 2007 18:19:20 +0000

mini-buildd (0.6.1~ui40+1) etch-ui; urgency=low

  * mbd-cruft: Under bld/, we should remove all "*.tar.gz", not only "orig.tar.gz".
  * mbd-cruft: Under bld/, we should also remove "*.udeb".

 -- Stephan Suerken <stephan.suerken@1und1.de>  Wed,  5 Dec 2007 17:51:04 +0000

mini-buildd (0.6.0~ui40+1) etch-ui; urgency=low

  * Backport for etch.

 -- Stephan Suerken <stephan.suerken@1und1.de>  Wed,  5 Dec 2007 16:07:21 +0000

mini-buildd (0.6.0) sid-ui; urgency=low

  * Milestone 0.6 summary (see other cl entries for encrypted details):
    o Fully automatic "lvm via loop device" configuration option
      This greatly eases the setup and maintentence of test systems or
      systems w/o "proper" pre-setup lvm.
    o Thorough script cleanup; user visible changes:
      - All scripts prefixed w/ "mbd-" to avoid namespace pollution when
        adding the library to PATH.
      - All scripts using a getopt library, proper command line arguments
        and a usage help (via -h).
    o Complete new scheme for the autobuild processing:
      Everything* that is done during the autobuild process is a QA-Check
      on a debian changes file, resulting each in 0=FINE, 1=WARN or 2=FAIL
      status code and a log file (* i.e., a build run on arch X is also just
      a QA-Check).
      If any of the QA checks in the sequence results in "FAIL", the autobuild
      run is stopped. If no check results in FAIL, the status is 0=BUILT; if
      the failing check was a build check, the autobuild run status is 1=FTBFS,
      else 2=REJECT.
      The overall status mail's subject now always reflect this (e.g.
      "FTBS: mypkg_1.2.3-1"); in the body, information adapted to the
      respective status is delivered. No log output is pasted here
      directly any more but, if needed, links to repective QA check logs
      on the repository host.
      Binary uploads are just installed quietly unless they don't originate
      from mini-buildd autobuilder hosts; then, the special status "DISCARD"
      is used.
      Build run statuses overview:
       - BUILT  : OK=Source package build, binary packages uploaded.
       - FTBFS  : Problems building, but retrying later.
       - REJECT : Unfixable errors, upload moved to REJECT/.
       - DISCARD: Binary upload not allowed, upload removed.
       - INTERNAL: Indicates a bug in mini-buildd or its setup.
    o New QA checks:
      - New: Check that the to-build source package is not already in repository.
      - Orig: Warn on reupload, reject on different files.
    o New file and directory layout:
      On build hosts, we only have directories "chroots/" (for auto lvm
      setup when used) and "builds/" under bld/.
      "builds/" is used as location for temporary build directories;
      nothing is stored permanently on bld hosts any more (even the orig tarball
      is copied on demand from the repository).
      All actual data (log and state of check runs) of an autobuild run is hold on
      the repository host only in the new directory "log"; under that dir, the
      data is hold in a structure PACKAGE/VERSION/UTC-STAMP/.
    o All qa-checks run on all bld hosts are now run in parallel.
      .......................................................
              Details below
  * -bld: New directory "bld/chroots/"; this is for all chroot-related
    files and the upcoming automatic lvm vg via loop images.
     => Obsoleted files under $HOME that may be removed eventually:
        DIST.setup-chroots.log DIST.update.log DIST.sources.list.
  * setup-lvm: @todo LOOPDEV is hardcoded.
  * setup-lvm: Add attach (-a) support (for use in rcS scripts).
  * build: Ignore "bad-version" lintian error (workaround for lintian on
    sarge erroring on Tilde-Versioning).
  * scripts: Setup sane naming conventions and fixed all scripts.
  * cleanup: rename tope level src/ to lib/.
  * update-common: Support to have library path in .profile.
  * lib: Add "cruft" script to (manually) remove cruft from earlier
    versions of mini-buildd.
  * update-common: Make file temporary: gpg_key_template; add to cruft.
  * update-bld: Remove adding of our own GPG key for apt-key: sbuild works
    around this itself. Obsoletes repository_signing_key.asc file, added to
    cruft.
  * all scripts: Add "mbd-" prefix (names and calls).
  * mbd-sign-release: Create to tmp first, then move (incr availability).
  * lib: Add mbd-libopt.sh getopt parser library.
  * mbd-build: getopt update.
  * mbd-preinstall: getopt update.
  * mbd-cruft: getopt update; fix variable naming; fix logging.
  * mbd-setup-chroots: getopt update.
  * mbd-setup-lvm: getopt update.
  * mbd-sign-release: getopt update.
  * mbd-update-*: geopt update.
  * common.sh: Add mbdCatUrl, update mbdGetUrl using that.
  * common.sh: Update ssh keyring tool so we don't need a temporary file.
    Obsoletes *.ssh_key.asc, added to cruft.
  * Building in extra directory bld/builds/ (was: top level bld/).
  * mbd-cruft: treat all build files in bld/ (rm *, mv orig.tar.gz).
  * mbd-cruft: Use -u (update) rather than -d.
  * mbd-update-rep: Add new top level directory "log".
  * mbd-build: sbuild call: Use --nolog, use own logfile name.
  * .sbuidrc: Change log dire to /tmp/ (we don't log anywhere anymore).
  * cruft: Obsolete "bld/logs".
  * mbdParseCF: Also parse "Source" entry.
  * preinstall: new logfile: logs/PACKAGE/VERSION/DATE/TYPE.log.
  * mdb-qa-check: New tool to simplifiy and generalize running qa checks.
  * mbd-*: Use extra dir per package under bld/builds/.
  * rep/mini-dinstall/REJECT/ obsoleted (cruft); moved to respective log directory.
  * Remove upload in DISCARD (not reject); fixup info mail.
  * mini-dinstall: Skip mail sending on success.
  * dput.cf: generate in common, obsolete rep/dput.cf and download on bld hosts.
  * Add support for /etc/default/mini-buildd-rep: en/disbale start of daemon.

 -- Stephan Suerken <stephan.suerken@1und1.de>  Wed,  5 Dec 2007 15:59:07 +0000

mini-buildd (0.5.1) etch-mini-buildd; urgency=low

  * Bugfix release.
  * Use --ignore-missing when updating chroots.
  * update-bld: Add Workaround for Debian Bug #327477 (bash building).
  * common.sh: parse_changes_file: Make it work for signed changes files.

 -- Stephan Suerken <stephan.suerken@1und1.de>  Mon, 24 Sep 2007 12:58:22 +0000

mini-buildd (0.5.0) etch-mini-buildd; urgency=low

  * "Milestone" (0.4->0.5): This release basically adds more QA:
     - Adopting versioning scheme from bpo; packages not complying are
       rejected.
     - Direct binary uploads (i.e., not from mini-buildd) are detected
       and rejected.
     - Packages w/ lintian errors now fail to build (and are not installed).
     This release also fixes a lot of pending smaller todos in one go (see cl).
  * update-rep-html: Show mandatory version part per dist.

 -- Stephan Suerken <stephan.suerken@1und1.de>  Thu, 20 Sep 2007 13:46:48 +0000

mini-buildd (0.5.0~pre.5) etch-mini-buildd; urgency=low

  * common.sh: Fix changes file parsing (leading space).
  * preinstall: On reject (version, binary upload): Move package to REJECT directory.
  * update-rep-html: Include links for incoming and rejected.

 -- Stephan Suerken <stephan.suerken@1und1.de>  Wed, 19 Sep 2007 15:48:16 +0000

mini-buildd (0.5.0~pre.4) etch-mini-buildd; urgency=low

  * @todo Automatic error prevention: REJECT wrong version number. This adapts the versioning
     scheme as described for backports.org. See
     http://www.backports.org/dokuwiki/doku.php?id=contribute .
  * @todo Automatic error prevention: REJECT direct binary uploads.

 -- Stephan Suerken <stephan.suerken@1und1.de>  Wed, 19 Sep 2007 14:16:08 +0000

mini-buildd (0.5.0~pre.3) etch-mini-buildd; urgency=low

  * common.sh: urlget_file will now write a dummy file on download error if none
    exists yet; fixes possible stalls on -bld package removal when the configured
    rephost does not work.
  * @todo [deb] preconfigure fails: No common.sh when configuring -rep. Variables
    are copied now and need to be synced if needed.
  * update-bld: Rename file for extra sources.
  * update-rep: Configure rep w/ keep_old = 1 again (not the reason sbuild fails sometimes).
  * -bld: debconf templates: Add descriptions for all items.
  * -rep: debconf templates: Add descriptions for all items.
  * control: Add package description.

 -- Stephan Suerken <stephan.suerken@1und1.de>  Tue, 18 Sep 2007 16:56:19 +0000

mini-buildd (0.5.0~pre.2) etch-mini-buildd; urgency=low

  * @todo [deb] on --purge: mini-dinstall unix socket file is not removed.
  * init.d: Remove obsolete/false status display.
  * @todo [deb] update-rep: Restart mini-dinstall.
  * @todo [deb] run update-rep from cron daily.
  * @todo [deb] -p (postinstall) option for running update scripts from postinstall.
  * @todo [deb] update-rep: autorun update-bld on all builders (as there might be config changes).
  * @todo [deb] bld: on package removal: Also remove lvm logical volumes.
  * @todo [deb] bld: on package removal: Also remove config snippet in schroot.conf.

 -- Stephan Suerken <stephan.suerken@1und1.de>  Mon, 17 Sep 2007 16:21:47 +0000

mini-buildd (0.5.0~pre.1) etch-mini-buildd; urgency=low

  * update-bld, setup-chroots: Add CHROOT_EXTRA_PACKAGES variable; remove obsolete
    "zile"; add "lintian". Only install in update-bld, not in setup-chroot.
  * build: Add lintian test; passing test w/o errors (except bad-distribution-in-changes-file)
    is now mandatory for uploads.

 -- Stephan Suerken <stephan.suerken@1und1.de>  Thu, 13 Sep 2007 18:09:20 +0200

mini-buildd (0.4.0) etch-mini-buildd; urgency=low

  * "Milestone" (0.3->0.4): This release moves the actual "autobuild" part
    from mini-dinstalls postinstall to the preinstall, and copies DSP rather
    than relying on the repository itself to have them installed; this fixes
    various pending problems:
     - No need to have a (guessed) timeout waiting for indexes to be updated
       before auto-building.
     - No installation on the actual repository until all configured archs are
       successfully build.
     - Works around sbuild's "sporadically not updating package list"
       behaviour.
    This release also uses reniced logging throughout all scripts (see daemon.log),
    improved error handling (logs mailed on failure) and the ability to configure
    specific mirrors for base distributions (sarge/amd64 problem).
  * Cosmetic fixes for logging and mail.

 -- Stephan Suerken <stephan.suerken@1und1.de>  Tue, 11 Sep 2007 16:32:09 +0000

mini-buildd (0.3.6) etch-mini-buildd; urgency=low

  * preinstall: upload: Fix: Ignore arch upload failures, log "skipping" instead.

 -- Stephan Suerken <stephan.suerken@1und1.de>  Tue, 11 Sep 2007 11:12:39 +0000

mini-buildd (0.3.5) etch-mini-buildd; urgency=low

  * common.sh: parse_changes_file: Also add changes file itself to list of files.
  * preinstall: update for above (give unqualified changes file).

 -- Stephan Suerken <stephan.suerken@1und1.de>  Tue, 11 Sep 2007 09:29:11 +0000

mini-buildd (0.3.4) etch-mini-buildd; urgency=low

  * Adding experimental setup-lvm script.
  * postinstall -> preinstall.
  * preinstall: Until we have a better solution: Don't build parallel, fail if one build fails.
  * preinstall/update-bld: scp DSP, don't rely on a deb-src line in build chroot;
    also obsoletes sleep before build runs.
  * Add extra build script.
  * preinstall: Change build logic: 1st, build for all archs; if all were successfull,
    upload all archs and return success.
  * Only one error mail per source, including proper logs now in the body.

 -- Stephan Suerken <stephan.suerken@1und1.de>  Mon, 10 Sep 2007 16:33:22 +0000

mini-buildd (0.3.3) etch-mini-buildd; urgency=low

  * NOTE: If you update, you need to reconfigue -bld and adapt the debian mirror
    configuration.
  * -bld config: Update mbd_debian_mirror to have a default mirror plus specific
    mirrors per dist if needed.
  * Logging: All scripts now use logging for informational output; logs for
    chroot setup and update go to seperate files.
  * setup-chroots: Add "-f" option to re-generate all chroots.
  * update-bld: Update chroots: Use pipe to schroot rather than different calls
    (significant speed improvemnet); further refine error handling.

 -- Stephan Suerken <stephan.suerken@1und1.de>  Thu,  6 Sep 2007 15:05:09 +0000

mini-buildd (0.3.2) etch-mini-buildd; urgency=low

  * update-bld: Also apt-clean source chroots to avoid pkg cache hanging around.
  * control: Fix: sbuild dep must be in common as we use group sbuild for mini-buildd.
  * update-rep-html: Design fixes for <ul/>.

 -- Stephan Suerken <stephan.suerken@1und1.de>  Thu,  6 Sep 2007 08:21:44 +0000

mini-buildd (0.3.1) etch-mini-buildd; urgency=low

  * setup-chroots: Avoid broken schroot.conf on error; also better error handling
    when chroot creation fails.
  * -bld: postinst: Fix order to be able to reconfigure after the -rep has new dists
    so newly needed chroots are auto-created.
  * setup-chroots: Always also trigger a -bld update.

 -- Stephan Suerken <stephan.suerken@1und1.de>  Tue,  4 Sep 2007 16:43:19 +0000

mini-buildd (0.3.0) etch-mini-buildd; urgency=low

  * "Milestone": This release adds
    - lvm support (chroots must be in lvm logical volumes now),
    - auto-setup for chroots and a
    - nice html overview page.
  * control: -bld: Add dep for lvm2, debootstrap.
  * config: -bld: Add rephttphost (obsoletes rephost+httpport), mbd_debian_mirror, mbd_lvm_vg.
  * Initial setup-chroots script.
  * update-bld: Auto-create chroot sources lists.
  * update-rep: Add "proper" html index file; obsoleting html index on -bld.
  * update-rep: mini-dinstall config: Use keep_old = 0 for now (multiple sources confuse sbuild).

 -- Stephan Suerken <stephan.suerken@1und1.de>  Tue,  4 Sep 2007 14:26:12 +0000

mini-buildd (0.2.1) etch-mini-buildd; urgency=low

  * Fix: mini-dinstall.conf: Fix arch line creation.
  * control: Fix inter-package dependencies.

 -- Stephan Suerken <stephan.suerken@1und1.de>  Wed, 29 Aug 2007 14:44:59 +0000

mini-buildd (0.2.0) etch-mini-buildd; urgency=low

  * "Milestone": Adds auto-configuration for -bld (being a slave to the
    already configured -rep), auto-configuration for the ssh keychain,
    ssh+http port configuration items -- and has many bugs and quirks
    fixed.
  * -rep config: Cleanups, support ssh+http port.
  * -rep config: Add on the fly defaults for rephost and mail.
  * -bld: add "zero-debconf": Only ask for rephost and download config from there.
  * -bld+rep: Auto-update mechanism for ssh keyrings.
  * control: Need wget, add dep for -common.
  * -rep: Add on-the-fly default for mbd_bldhosts.

 -- Stephan Suerken <stephan.suerken@1und1.de>  Tue, 28 Aug 2007 16:26:14 +0000

mini-buildd (0.1.3) etch-mini-buildd; urgency=low

  * update-*: Output cosmetics; dput.cf is also now always updated.
  * postinst: typeo fix ;(.

 -- Stephan Suerken <stephan.suerken@1und1.de>  Wed, 22 Aug 2007 14:04:28 +0000

mini-buildd (0.1.2) etch-mini-buildd; urgency=low

  * update-rep, postinstall: use "mini-buildd-$appendix" as generic id for
    dput.

 -- Stephan Suerken <stephan.suerken@1und1.de>  Wed, 22 Aug 2007 13:47:43 +0000

mini-buildd (0.1.1) etch-mini-buildd; urgency=low

  * update-common: Remove temporary use of port 24 for ssh.
  * update-rep: Change file name ".dput.cf -> "dput.cf", so its per
    default shown in http index.
  * update-rep: Fix dput name to more generic "mini-buildd@HOST".

 -- Stephan Suerken <stephan.suerken@1und1.de>  Wed, 22 Aug 2007 13:07:58 +0000

mini-buildd (0.1.0) etch-mini-buildd; urgency=low

  * "Milestone": The repository part is configurable via debconf,
     all config files are created automatically, automatic ssh/gnupg
     handling is in place. This release will be used to build an
     initial installation for further testing.
  * Clean up public names for ssh+pgp key.
  * Establish $HOME/.mini-buildd.conf in -rep as master config file.
    - Use debconf to create the file in -rep.
    - Use in all update-* scripts.
    - Add common.sh to reduce redundancies in scripts.
  * debian: Prepare to use debconf for mini-buildd-rep:
    - Add initial template w/ all configuartion options.
    - postinst: Update to write config file.
    - rules: call dh_debconf.
    - config: Add initial debconf configuration script.
  * Add logging facility via syslog: See /var/log/daemon.log, tag "mini-buildd".
  * update-*: Always rewrite automatically produced config (even if they exist).

 -- Stephan Suerken <stephan.suerken@1und1.de>  Tue, 21 Aug 2007 13:05:32 +0000

mini-buildd (0.0.8) etch-mini-buildd; urgency=low

  * Status: Cleanup the way we run the builder -- i.e., only on
    source-only uploads; scripts now prepared to use "std" pkg
    configuration.
  * Add TODO and README.Debian.
  * postinstall: Replace python script w/ shell script by now:
    - we can simply source sh config in later.
    - much simpler logic: When upload is ARCH=SOURCE (i.e., source only
      upload), feed bld. Else, do nothing.
    - Skipping mail sending on every binary package.
    - Skipping buggy sending of NEWS.Debian file (does not always exist).
    - Mail sending will be ahndled later.
  * postinstall: Embedding build script.

 -- Stephan Suerken <stephan.suerken@1und1.de>  Thu, 16 Aug 2007 17:05:59 +0000

mini-buildd (0.0.7) etch-mini-buildd; urgency=low

  * Status: Bugfix/cleanup only release.
  * Fix: postinst rep+bld: don't call adduser.
  * Fix: Add additional real http (apache2-mpm-worker) package dep.
  * Put all helper scripts to lib/mini-buildd, as they don't really belong to usr/bin.

 -- Stephan Suerken <stephan.suerken@1und1.de>  Thu, 16 Aug 2007 15:09:22 +0000

mini-buildd (0.0.6) etch-mini-buildd; urgency=low

  * Status: This revision has the needed pkg split and a new directory layout
    for /home/mini-buildd; purge old mini-buildd package before trying this.
  * control: Fix arch to all, not any.
  * Splitting package: common, rep, bld:
    - Splitting mbd-update-home: mbd-update-common, mbd-update-rep, mbd-update-bld.
    - debian/*: Many updates to cope with new multi-pkg setup.
  * mbd-update-*: Changed directory layout for /home/mini-buildd/.

 -- Stephan Suerken <stephan.suerken@1und1.de>  Thu, 16 Aug 2007 12:52:35 +0000

mini-buildd (0.0.5) etch-mini-buildd; urgency=low

  * Status: This revision should be able to actually autobuild
    for dist "unstable"; restrictions:
    - bld-host == rep-host, and only one bld-host.
    - proper schroot setup for a chroot named "unstable" is provided beforehand.
  * Fix: Use system user for mini-buildd.
  * mbd-update-home: Support for .sbuildrc.
  * use shortcuts "rep" and "bld" for the repository and build parts, resp.
  * "Auto-ssh-key" support; dep to openssh-cleint.
  * Missing dep: mailx.
  * postinst: Make added user mini-buildd --ingroup sbuild.
  * Many smaller fixes.

 -- Stephan Suerken <stephan.suerken@1und1.de>  Wed, 15 Aug 2007 16:58:36 +0000

mini-buildd (0.0.4) etch-mini-buildd; urgency=low

  * control: Add dep for httpd.
  * mbd-update-home: Clenaups.
  * mbd-update-home: Support "public_html" link.
  * mbd-update-home: Rudimentary HTML index file support.

 -- Stephan Suerken <stephan.suerken@1und1.de>  Tue, 14 Aug 2007 14:12:16 +0000

mini-buildd (0.0.3) etch-mini-buildd; urgency=low

  * mbd-update-home: Add support for ".dput.cf".
  * control: Add dep for dput.
  * mbd-update-home: Add support to generate gnupg signing key automatically (for apt-secure).
  * control: Add dep for gnupg.

 -- Stephan Suerken <stephan.suerken@1und1.de>  Tue, 14 Aug 2007 12:24:03 +0000

mini-buildd (0.0.2) etch-mini-buildd; urgency=low

  * dirs: add usr/lib/mini-buildd for scriptlets to be used by mini-buildd only.
  * Fix: build script: Use mini-buildd user.
  * debian: Mv preinst code back to postinst (we need postinst, no need to keep
    two files w/ init script fixed);  also revert pre-depends -> depends for adduser.
  * Add mbd-update-home tool; calling that from postinst.
  * rules: Install mbd-update-home to usr/bin.
  * lib/mini-buildd: Add "sign-release".

 -- Stephan Suerken <stephan.suerken@1und1.de>  Mon,  6 Aug 2007 17:13:13 +0000

mini-buildd (0.0.1) etch-mini-buildd; urgency=low

  * Debian native package, initial release:
    - Initial debian skeleton.
    - /usr/bin/mbd-build: Included "/usr/local/bin/build" from prototype.
    - /usr/bin/mbd-postinstall: Included "/home/debian/bin/postinstall" from prototype.
    - init.d: Initial version added.
    - preinst: .mini-dinstall.conf: Initial version from prototype added.
    - preinst/postrm: add/del dedicated user "mini-buildd".

 -- Stephan Suerken <stephan.suerken@1und1.de>  Mon,  6 Aug 2007 15:17:01 +0000
