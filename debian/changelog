mini-buildd (0.8.0) etch-ui; urgency=low

  * qa-check Build: Don't warn when no packages to build for arch.
  * Fix: Use /usr/share (not /usr/lib) for mini-buildd lib.
  * mini-buildd-common.postinst: Don't call sbuild-adduser with full path
    [W:lintian]
  * Add (nop yet) config script for -common [E:lintian].
  * init: Add "reindex" target.
  * Implement Auto-Backports via new qa-check "Backports".
  * Chroot-Hooks:
    - New "local config" directory "~/.mini-buildd" on repo, copied by
      builders.
    - New dir: /usr/share/mini-buildd/chroots-update.d/, used by
      mbd-update-bld.  Hooks added:
      - 10_apt: upgrade, install extras, autoremove, clean.
      - 70_bug327477: bug workaround.
      - 99_local: run local scripts via run.d.
  * Base distribution sid: Add forced version "~idSID"; formerly, sid
    wasn't restricted which may lead to conflicts with versions in real
    Debian "sid"
  * mini-buildd-bld: Add "defer" configuration support, and hardenend
    Debian configure/install scripts; fixes some known hen/egg problems on
    initial installs.

 -- Stephan Sürken <stephan.suerken@1und1.de>  Mon, 04 May 2009 15:11:57 +0000

mini-buildd (0.7.13~ui40+1) etch-ui; urgency=low

  * Backport for etch-ui.
  * MINI_BUILDD: BACKPORT_MODE

 -- Stephan Sürken <stephan.suerken@1und1.de>  Tue, 30 Dec 2008 15:32:19 +0000

mini-buildd (0.7.13~ui50+1) lenny-ui; urgency=low

  * mbd-lintian: Pre-run apt-get update to avoid warnings.
  * rules/control/compat: Update to debhelper 7, minimize rules file.
  * mbd-common.sh: Be more smart about MBD_LIB to ease testing scripts
    from svn.
  * mbd-remove-pkg:
    - Complete tool and harden it against misuse.
    - Actually install this tool to -rep package.

 -- Stephan Sürken <stephan.suerken@1und1.de>  Tue, 30 Dec 2008 15:20:40 +0000

mini-buildd (0.7.12~ui40+1) etch-ui; urgency=low

  * Backport for etch-ui.

 -- Stephan Suerken <stephan.suerken@1und1.de>  Wed, 10 Dec 2008 10:46:13 +0100

mini-buildd (0.7.12~ui50+1) lenny-ui; urgency=low

  * Upgrade sbuild dependency to latest in testing/lenny: 0.57.7.
  * apt-secure: Fix for sbuild 0.57.5:
    - Set apt_allow_unauthenticated = 1 in mini-buildd for now.
    - Add @todo for later:[brain] Make sbuild apt_allow_unauthenticated
      configurable via debconf; add some infrastructure to add keys when
      entering chroots, and some way to manage keys.
  * control: Update to standards version 3.8.0 (no changes needed).
  * mbd-update-bld: Add --purge to autoremove run.
  * 99mini-buildd (schroot setup): Fix: Honor AUTH_VERBOSITY for the one log
    left in the script.
  * Add tool "mbd-lintian": Install lintian and run tests in separate snapshots.
    - mbd-qa-check: Use mbd-lintian for lintian check.
    - mbd-common: Remove "lintian" from list of extra packages for source chroots.
    .
    Note: Having lintian removed from the extra packages list means that source
    chroots can now be really minimal (lintian pulled in quite some dependencies)
    (except for ccache, that is). This solves two problems:
    .
    - Source dependency check not tainted by lintian+dependencies any more.
    - Already installed packages wont be upgraded by sbuild, breaking package
      builds that need updated versions of installed lintian dependencies.
    .
    To gain these advantages, you need manually regenerate your chroots on all
    build hosts; as root run
    .
    /usr/lib/mini-buildd/mbd-setup-chroots -f
  * schroots: Use "-o noatime,user_xattr" instead of the default "-o
    atime,sync,user_xattr"; this may speed up things greatly on certain systems.

 -- Stephan Suerken <stephan.suerken@1und1.de>  Wed, 10 Dec 2008 10:44:12 +0100

mini-buildd (0.7.11~ui40+1) etch-ui; urgency=low

  * Backport for etch-ui.

 -- Stephan Suerken <stephan.suerken@1und1.de>  Mon, 08 Dec 2008 15:56:16 +0000

mini-buildd (0.7.11~ui50+1) lenny-ui; urgency=low

  * html: Show new build options, and some cosmetics.
  * lintian exceptions: Exclude more "unknown distribution" errors.
  * syslog: Log to facility user, not daemon.
  * ccache fix: Give CCACHE_DIR explicitely as environment for sbuild (some
    build system change $HOME for whatver reasons (e.g., package "subversion"'s
    test suite does), effectively disabling gcc.
  * Add mini-buildd control feature via changelog entry:
    * MINI_BUILDD: <CONTROL_OPTION>
    Currently, we support BACKPORT_MODE only; this comes handy for
    lintian-buggy package backports.
  * copyright: Making this DFSG compatible, license GPL-2+.
  * copyright: Update to proposed formal format.
  * mbd-update-bld: Also run "apt-get autoremove" (errors ignored for when not
    supported) for source chroot update.

 -- Stephan Suerken <stephan.suerken@1und1.de>  Mon, 08 Dec 2008 15:53:35 +0000

mini-buildd (0.7.10~ui40+1) etch-ui; urgency=low

  * Rebuild for etch.

 -- Stephan Suerken <stephan.suerken@1und1.de>  Thu, 21 Aug 2008 18:08:11 +0200

mini-buildd (0.7.10~ui50+1) lenny-ui; urgency=low

  * Debian and external doc links support in overview html for convenience:
    - README.Debian: Initial proper version.
    - TODO: Rename from TODO.Debian so dh_installdocs picks it up.
    - -rep: Add external doc URL support (variable && debconf).
    - -rep: Add documentation section in overview html:
     - Add link to dwww URL of package docs.
     - Add "Recommends" for dwww.
     - Add link to external docs where configured.
  * DEB_BUILD_OPTIONS support for builds:
    - -rep: Add DEB_BUILD_OPTIONS for all archs (var+debconf).
    - QA build: Add DEB_BUILD_OPTIONS support for sbuild call.

 -- Stephan Suerken <stephan.suerken@1und1.de>  Thu, 21 Aug 2008 17:59:10 +0200

mini-buildd (0.7.9~ui40+1) etch-ui; urgency=low

  "Make lenny lintian happy" release.

  * Add po-debconf support; Set strings in -common translatable
    (nothing else yet). Required for lenny and up.
  * Cosmetic fixes in control (lintian warnings).
  * Fix copyright file (lintian warnings).
  * Add LSB sections for both -rep and -bld init scripts.
  * Explicitly use "bash" for *.config scripts, as we use bash addons. 
  * rules: Fix: Swap arch and indep targets.

 -- Stephan Suerken <stephan.suerken@1und1.de>  Fri, 08 Aug 2008 16:26:40 +0200

mini-buildd (0.7.8~ui40+1) etch-ui; urgency=low

  * Add numeric version support for lenny (5.0). 

 -- Stephan Suerken <stephan.suerken@1und1.de>  Fri, 08 Aug 2008 11:36:08 +0200

mini-buildd (0.7.7~ui40+1) etch-ui; urgency=low

  * logrotate: Redirect stdout to /dev/null for restart (avoids unnecesary
    mails from cron).

 -- Stephan Suerken <stephan.suerken@1und1.de>  Thu, 17 Jul 2008 16:21:41 +0200

mini-buildd (0.7.6~ui40+1) etch-ui; urgency=low

  * cron.daily: Fix: If package is removed, but not purged, exit silently.
  * preinstall: On FTBFS, don't auto-retry, but move DSP to directory FTBFS
    in logs (like for REJECT). Hint to re-upload to retry.
    Note: Former behaviour makes sense for missing dependencies that will
    eventually be fullfilled after another build; however, real life shows
    that the reason is just a plain error in the package for nearly all cases,
    so it does not really do anything useful but spam us.

 -- Stephan Suerken <stephan.suerken@1und1.de>  Wed, 16 Jul 2008 13:32:42 +0200

mini-buildd (0.7.5~ui40+1) etch-ui; urgency=low

  * Adapt package to changes now applied to mini-dinstall 0.6.25/debian:
    - mbd-update-rep: Remove "apt_ftparchive_usecache = 1" (in the debian
      package's patch, this can not be configured).
    - mbd-update-rep: Change release_notautomatic to experimental_release
      (name chaged in the debian package's patch).
    - mbd-cruft: Add all ".cache.db" under rep/ for removal
      (other location/name used the debian package's patch).

 -- Stephan Suerken <stephan.suerken@1und1.de>  Thu,  3 Jul 2008 17:14:41 +0200

mini-buildd (0.7.4~ui40+1) etch-ui; urgency=low

  * Add support for db cache for apt-ftparchive (speeds up index updates);
    - Needs mini-dinstall_0.6.25~ui40+0abgit6 (nop if not installed).
    - mini-dinstall.conf: Add new option.
    Fixes: @todo [mini-dinstall] Need speed increase for index file creation:
    http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=225483
  * .mini-dinstall.conf: chown_changes_files = 0.
    Fixes: @todo [mini-dinstall] Changes files not readable for public.
  * .mini-dinstall.conf: keep_old = 0 for *-experimental releases (i.e., only
    keep newest version).
  * standard dist: Make 1-9 start revision mandatory for versions
    Example: "~mbd40+1".
    experimental dist: Make a zero start revision mandatory for versions
    Example: "~mbd40+0".
    [ Usually, experimental uploads should look s.th. like "1.2-1~mbd40+0exp1"
      so that a "normal" upload "1.2-1~mbd40+1" will always have a higher version. ]
  * Cleanup, purging some obsolete functions: mbdCheckVersion.

 -- Stephan Suerken <stephan.suerken@1und1.de>  Wed, 11 Jun 2008 11:01:14 +0200

mini-buildd (0.7.3~ui40+1) etch-ui; urgency=low

  * Minor cleanup release.
  .
  * QALintian: Yet one more to ignore: source-nmu-has-incorrect-version-number.
  * -bld: Some typos fixed in debconf template.
  * setup-chroots: Add linux personality support for schroots; i386=linux32 only
    for now. [Needed for multiarch builds, i.e. build i386 under amd64].
  * Harden /etc/init.d/mini-buildd-rep:
    - Depend on procps.
    - Don't fail if started when already started.
    - start/stop: Check for pids instead of just sleeping 5 secs.
    - stop: Hard kill after 20 seconds if normal shutdown fails.
    - ... and reniced output.

 -- Stephan Suerken <stephan.suerken@1und1.de>  Thu,  5 Jun 2008 16:57:54 +0200

mini-buildd (0.7.2~ui40+1) etch-ui; urgency=low

  * Fix fix for mbd-update-bld ;(.

 -- Stephan Suerken <stephan.suerken@1und1.de>  Wed,  4 Jun 2008 13:22:14 +0200

mini-buildd (0.7.1~ui40+1) etch-ui; urgency=low

  * Minor bugfix release.
  .
  * mbd-preinstall: Fix path to changes file on arch build.
  * mbd-update-bld: Use "-o APT::Install-Recommends=false" for apt-get when
    updating the basis chroots (since apt 0.7.7, recommended packages are
    installed per default).
  * Cosmetics: Fix var order in mini-buildd.conf.
  * QALintian: Fix for ignore pattern: Omit trailing space.
  * .mini-dinstall.conf: Regression: Re-add arch "all".

 -- Stephan Suerken <stephan.suerken@1und1.de>  Wed,  4 Jun 2008 12:54:12 +0200

mini-buildd (0.7.0~ui40+1) etch-ui; urgency=low

  * **Happy chroot release**
  .
  * bld: New chroot management:
    * bld/chroots: New layout for the sources.lists to use in chroots:
      DIST/base.any.list     1x: Sources for the base dist (any arch).
      DIST/base.ARCH.list    nx: Sources for the base dist (special archs).
      DIST/mbd.any.list      1x: Sources for the mbd repository (any arch).
      DIST/extra.any.list    1x: Extra sources (any arch).
      DIST/extra.ARCH.list   nx: Extra sources (special archs).
      No extra files involved; all configured on -rep in ~/.mini-buildd.conf.			
    * Add hook for schroot: /etc/schroot/setup.d/99mini-buildd:
      * Automates creation of sources list on chroot creation.
      * Allows different sources.lists for -source or build chroots (snapshots),
        and for snapshots between standard and experimental.
      * Auto-updating of apt cache.
    * mbd-update-bld: Update to new layout (no arch support yet).
    * mbd-cruft: Add now-obsolete files under chroots to cruft.
    * setup-chroots: rename lv names for chroots: DIST-ID to mbd-DIST-ID-ARCH. The prefix
      makes more clear what the lvs are for, avoids lv-namesspace pollution;
      the arch postfix allows multiarch chroots on on bld host (e.g., amd64+i386).
    * preinstall, QABuild: Support for multiarch:
      - Temporary build dir now has additional -ARCH suffix.
      - Run checks/builds per arch, not per build host.
    * Update to sbuild 0.57.2 (we need the --chroot option).
    * Update to sbuild 0.57.3 (we need a bug fix from that version).
    * debconf: Adapt to new chroot management:
      * mini-buildd.conf: +"mbd_archs", ask for the bld host for all archs, write to +"mbd_bldhost_ARCH".
      * mini-buildd.conf: +"mbd_src_DIST_base_any", ask for special arch source for all archs, write to +"mbd_src_DIST_base_ARCH".
      * mini-buildd.conf: +"mbd_src_DIST_extra_any", ask for special arch source for all archs, write to +"mbd_src_DIST_extra_ARCH".
      * mini-buildd.conf: -"mbd_bldhosts" (obsoleted).
      * mini-buildd-rep.conf: -"mbd_debian_mirror" (obsoleted).
      * Fix all defaults/on-the fly defaults. In a standard install with default values,
        you now get a working buildd for localhost's native arch called etch-`hostname`.
      * rep+bld postinstall: Update to new debconf scheme. 
      * 99mini-buildd: Update to new debconf scheme.
      * new cruft added: bld/chroots/*/*.
      * Remove all bld extra file logs (lvm setup, chroot setup, chroot update), use
        MBD_LOG instead (=> continuous logging, no worry about rotating, etc).
      * new cruft added: All logs under bld/chroots/.
      * lib/*: Update to new syntax of mbd_dists.
      * mbd lib: New generic function mbdGenSources (moved from 99mini-buildd) to generate
        sources lists on the fly.
      * bld config: Add mbd_bldhost ID; suck rep config in config, and add dynamic selection question.
      * Update all lib/*.
      * setup-chroots/schroot.conf: Write two configs, one more for -experimental; else we can't
        distinguish in schroot setup.
      * Dynamic sources list support for *-experimental.
      * Updated html overview page:
        - Support to show -expermiental.
        - Show buld dependencies.
        - Detailed view via js.
        - Fix HTML to validated HTML.
      * update-rep: Fix for multiarch: Only run update-bld per bld host, not arch.
    * Update dep to mini-dinstall >> 24 (0.6.25 private git branch currently):
      - mini-dinstall.conf: Add release_notautomatic = 1
    * .sbuildrc: Add apt_policy=1, so we can satisfy dependencies via all sources we added.
    * Add "ccache" support (add path to .sbuildrc, add ccache to extra packages).
    * update -bld prerm (lvm) for new setup.
  .
  * Miscellaneous:
    * control: Depend on mini-dinstall >> 0.6.23 (ui-etch-bpo available). Fixes
      @todo [mini-dinstall] Allow apt-get update during index generation: http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=324855 (NMU fix unstable).
      , among other things.
    * cron: Send output of nightly updates to configured mail address. Fixes
      @todo cron: MAILTO (?).
    * sbuild: Set sbuild_mode to user; simplifies error handling in "build" qa test.
    * Fix: Add "build-essential" to list of extra packages for base chroots; this is
      needed because since dpkg-1.14.16, this is checked and hence a requirement for
      package building.
      Compare:
      - http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=402901
      - http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=480638
    * update-bld: Fix: For chroot updater, add DEBIAN_FRONTEND="noninteractive" env to avoid
      any debconf questions: Fixes
      @todo [chroots]: Sarge && debconfig non-interactive per default?
    * Fix: .sbuildrc must have "1;" at end ("perl needs this".)
    * .sbuildrc: put all generic options to .sbuildrc.
    * QACheckNew: Fix for experimental: If dist is -experimental, we
      should also check non-experimental and vice versa.
    * QACheckOrig: Fix for experimental: If dist is -experimental, we
      should also check non-experimental and vice versa.
    * -rep: Note after configuration; show URL and important notes.
      Fixes: @todo [deb] For -rep: debconf finals: Note that points to mini-buildd overview URL.
    * QACheckLintian: Ignore "menu-item-creates-new-root-section": for lintian <= etch, this is
      an ERROR, but imho should be a WARNING only, and not let builds fail.
    * QACheckLintian: Ignore "changelog-should-mention-nmu": Does not make sense for mini-buildd.
    * Autobuild binary packages *.changes files will now be signed with our GPG key.
      Fixes: @todo GPG signing of auto-build packages.
    * Rotating support for the mini-dinstall.log file:
      - Recommend logrotate (rep+bld).
      - Add logrotate.d for rep: weekly/5; restart after rotating.
    * Add debconf note for *-common in postrm: Warn before purging user mini-buildd if it
      has a repository.
      Fixes: @todo [deb] Warn before purging package && repository.
    * setup-chroots: Fix: Remove temporary schroot conffile.
    * setup-chroots: Add -d "delete" option (analogous to setup-lvm).
    * setup-lvm: Fix for -d "delete": Also remove pv via pvremove.
    * -bld, prerm:
      - Call "setup-chroots -d" on "remove" (removing redundant code).
      - Call "setup-lvm -d" on "remove" (new feature: auto-lvm removal).
    * -common: postrm: make it (more) idempotent.
  .
  * Items from TODO.Debian fixed by (above) structural changes:
    - @todo *-experimental: Integrity checks.
    - @todo [brain] Minimal dependency building.
    - @todo [schroot] Depend on schroot 1.1.4 (http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=391319). No bpo yet.
    - @todo Support for more than one arch in one bld-host.
    - @todo Apt cache of build chroots should be updated before each build run.
    - @todo HTML overview: Update for *-experimental.
    - @todo HTML overview: Update for new chroot setup (sources lists).
    - @todo [mini-dinstall] Experimental (Non-Automatic) support: http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=336232
    - @todo [deb] rep,bld: Current: manually edit file ${ID}.sources.list.extra on -bld for extra sources list (e.g. bpo);
      make this generically configurable via debconf in -rep.
    - @bug  [auto-lvm/deb]: When installing -bld only, setup-lvm is called before update-bld, and hence fails:
      /usr/lib/mini-buildd/mbd-setup-lvm: line 4: /home/mini-buildd/.mini-buildd.conf: No such file or directory
    - @todo [auto-lvm]: Debug problems on initial setup.
	
 -- Stephan Suerken <stephan.suerken@1und1.de>  Tue,  3 Jun 2008 10:49:54 +0200

mini-buildd (0.6.5~ui40+1) etch-ui; urgency=low

  * Fix: Add verify_sigs = 0 to .mini-dinstall.conf (defaults to 1 when debian-keyring package
    is installed; we don't want this enabled ever at the moment.
  * Fix: Ignoring lintian error "no-description-in-changes-file": since dpkg 1.4.16: Changes
    files in source only uploads have no description field any more.

 -- Stephan Suerken <stephan.suerken@1und1.de>  Fri, 25 Apr 2008 17:36:25 +0200

mini-buildd (0.6.4~ui40+1) etch-ui; urgency=low

  * Per dist, add new distribution "*-experimental". This ist NOT staging,
    but really just yet another repository. Packages uploaded to experimental
    will always stay there, seperately; it just uses the same framework
    to build packages, a new upload to "*" is needed to get it to the
    actual distribution.
    Note that *-experimental distributions can not yet satisfy build-deps
    from themselves.
  * Smaller enhancements:
    - In mails, always give distribution; most notably, to see what packages
      are uploaded to experimental.
    - mdb-setup-chroots: Change chroot fs type to ext2 (was ext3 ?!);
      we really have no need for journalling here. May speed up things
      somewhat.
    - *-bld/debconf: Put mirror and lvm setup items to high prio (was
      medium); you almost always want to change these.
  * Bug fixes:
    - mbd-update-rep-html, mbd-update-bld: Make some logger lines
      that may have empty args not wait on input. Fixes some update
      scripts just idling around (under sid's logger version).
    - schroot.conf: Increase snapshot size to 4G (was 2G). This will
      workaround the phenomena described in
      http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=471545

 -- Stephan Suerken <stephan.suerken@1und1.de>  Wed, 19 Mar 2008 19:21:09 +0100

mini-buildd (0.6.3~ui40+1) etch-ui; urgency=low

  * preinstall: Cosmetic: Show arch on postbuild check notice "no changes".
  * qa-check: UploadDSP: Cosmetic: Don't use -v for scp.
  * common: Fix mbdParseCF for inline PGP signatures.
  * qa-check: Fix typo in uploadDSP, breaking orig.tar.gz-from-rep upload.

 -- Stephan Suerken <stephan.suerken@1und1.de>  Thu,  6 Dec 2007 13:34:50 +0000

mini-buildd (0.6.2~ui40+1) etch-ui; urgency=low

  * mbd-preinstall/postbuild: Fix: Only run if changes file is present (if there is no package to build).
  * mbd-common.sh: Cosmetic: Make the internal error status text BIG.
  * mbd-qa-check: Cosmetic: No need to clean any files after remote tests.

 -- Stephan Suerken <stephan.suerken@1und1.de>  Wed,  5 Dec 2007 18:19:20 +0000

mini-buildd (0.6.1~ui40+1) etch-ui; urgency=low

  * mbd-cruft: Under bld/, we should remove all "*.tar.gz", not only "orig.tar.gz".
  * mbd-cruft: Under bld/, we should also remove "*.udeb".

 -- Stephan Suerken <stephan.suerken@1und1.de>  Wed,  5 Dec 2007 17:51:04 +0000

mini-buildd (0.6.0~ui40+1) etch-ui; urgency=low

  * Backport for etch.

 -- Stephan Suerken <stephan.suerken@1und1.de>  Wed,  5 Dec 2007 16:07:21 +0000

mini-buildd (0.6.0) sid-ui; urgency=low

  * Milestone 0.6 summary (see other cl entries for encrypted details):
    o Fully automatic "lvm via loop device" configuration option
      This greatly eases the setup and maintentence of test systems or
      systems w/o "proper" pre-setup lvm.
    o Thorough script cleanup; user visible changes:
      - All scripts prefixed w/ "mbd-" to avoid namespace pollution when
        adding the library to PATH.
      - All scripts using a getopt library, proper command line arguments
        and a usage help (via -h).
    o Complete new scheme for the autobuild processing:
      Everything* that is done during the autobuild process is a QA-Check
      on a debian changes file, resulting each in 0=FINE, 1=WARN or 2=FAIL
      status code and a log file (* i.e., a build run on arch X is also just
      a QA-Check).
      If any of the QA checks in the sequence results in "FAIL", the autobuild
      run is stopped. If no check results in FAIL, the status is 0=BUILT; if
      the failing check was a build check, the autobuild run status is 1=FTBFS,
      else 2=REJECT.
      The overall status mail's subject now always reflect this (e.g.
      "FTBS: mypkg_1.2.3-1"); in the body, information adapted to the
      respective status is delivered. No log output is pasted here
      directly any more but, if needed, links to repective QA check logs
      on the repository host.
      Binary uploads are just installed quietly unless they don't originate
      from mini-buildd autobuilder hosts; then, the special status "DISCARD"
      is used.
      Build run statuses overview:
       - BUILT  : OK=Source package build, binary packages uploaded.
       - FTBFS  : Problems building, but retrying later.
       - REJECT : Unfixable errors, upload moved to REJECT/.
       - DISCARD: Binary upload not allowed, upload removed.
       - INTERNAL: Indicates a bug in mini-buildd or its setup.
    o New QA checks:
      - New: Check that the to-build source package is not already in repository.
      - Orig: Warn on reupload, reject on different files.
    o New file and directory layout:
      On build hosts, we only have directories "chroots/" (for auto lvm
      setup when used) and "builds/" under bld/.
      "builds/" is used as location for temporary build directories;
      nothing is stored permanently on bld hosts any more (even the orig tarball
      is copied on demand from the repository).
      All actual data (log and state of check runs) of an autobuild run is hold on
      the repository host only in the new directory "log"; under that dir, the
      data is hold in a structure PACKAGE/VERSION/UTC-STAMP/.
    o All qa-checks run on all bld hosts are now run in parallel.
      .......................................................
              Details below
  * -bld: New directory "bld/chroots/"; this is for all chroot-related
    files and the upcoming automatic lvm vg via loop images.
     => Obsoleted files under $HOME that may be removed eventually:
        DIST.setup-chroots.log DIST.update.log DIST.sources.list.
  * setup-lvm: @todo LOOPDEV is hardcoded.
  * setup-lvm: Add attach (-a) support (for use in rcS scripts).
  * build: Ignore "bad-version" lintian error (workaround for lintian on
    sarge erroring on Tilde-Versioning).
  * scripts: Setup sane naming conventions and fixed all scripts.
  * cleanup: rename tope level src/ to lib/.
  * update-common: Support to have library path in .profile.
  * lib: Add "cruft" script to (manually) remove cruft from earlier
    versions of mini-buildd.
  * update-common: Make file temporary: gpg_key_template; add to cruft.
  * update-bld: Remove adding of our own GPG key for apt-key: sbuild works
    around this itself. Obsoletes repository_signing_key.asc file, added to
    cruft.
  * all scripts: Add "mbd-" prefix (names and calls).
  * mbd-sign-release: Create to tmp first, then move (incr availability).
  * lib: Add mbd-libopt.sh getopt parser library.
  * mbd-build: getopt update.
  * mbd-preinstall: getopt update.
  * mbd-cruft: getopt update; fix variable naming; fix logging.
  * mbd-setup-chroots: getopt update.
  * mbd-setup-lvm: getopt update.
  * mbd-sign-release: getopt update.
  * mbd-update-*: geopt update.
  * common.sh: Add mbdCatUrl, update mbdGetUrl using that.
  * common.sh: Update ssh keyring tool so we don't need a temporary file.
    Obsoletes *.ssh_key.asc, added to cruft.
  * Building in extra directory bld/builds/ (was: top level bld/).
  * mbd-cruft: treat all build files in bld/ (rm *, mv orig.tar.gz).
  * mbd-cruft: Use -u (update) rather than -d.
  * mbd-update-rep: Add new top level directory "log".
  * mbd-build: sbuild call: Use --nolog, use own logfile name.
  * .sbuidrc: Change log dire to /tmp/ (we don't log anywhere anymore).
  * cruft: Obsolete "bld/logs".
  * mbdParseCF: Also parse "Source" entry.
  * preinstall: new logfile: logs/PACKAGE/VERSION/DATE/TYPE.log.
  * mdb-qa-check: New tool to simplifiy and generalize running qa checks.
  * mbd-*: Use extra dir per package under bld/builds/.
  * rep/mini-dinstall/REJECT/ obsoleted (cruft); moved to respective log directory.
  * Remove upload in DISCARD (not reject); fixup info mail.
  * mini-dinstall: Skip mail sending on success.
  * dput.cf: generate in common, obsolete rep/dput.cf and download on bld hosts.
  * Add support for /etc/default/mini-buildd-rep: en/disbale start of daemon.

 -- Stephan Suerken <stephan.suerken@1und1.de>  Wed,  5 Dec 2007 15:59:07 +0000

mini-buildd (0.5.1) etch-mini-buildd; urgency=low

  * Bugfix release.
  * Use --ignore-missing when updating chroots.
  * update-bld: Add Workaround for Debian Bug #327477 (bash building).
  * common.sh: parse_changes_file: Make it work for signed changes files.

 -- Stephan Suerken <stephan.suerken@1und1.de>  Mon, 24 Sep 2007 12:58:22 +0000

mini-buildd (0.5.0) etch-mini-buildd; urgency=low

  * "Milestone" (0.4->0.5): This release basically adds more QA:
     - Adopting versioning scheme from bpo; packages not complying are
       rejected.
     - Direct binary uploads (i.e., not from mini-buildd) are detected
       and rejected.
     - Packages w/ lintian errors now fail to build (and are not installed).
     This release also fixes a lot of pending smaller todos in one go (see cl).
  * update-rep-html: Show mandatory version part per dist.

 -- Stephan Suerken <stephan.suerken@1und1.de>  Thu, 20 Sep 2007 13:46:48 +0000

mini-buildd (0.5.0~pre.5) etch-mini-buildd; urgency=low

  * common.sh: Fix changes file parsing (leading space).
  * preinstall: On reject (version, binary upload): Move package to REJECT directory.
  * update-rep-html: Include links for incoming and rejected.

 -- Stephan Suerken <stephan.suerken@1und1.de>  Wed, 19 Sep 2007 15:48:16 +0000

mini-buildd (0.5.0~pre.4) etch-mini-buildd; urgency=low

  * @todo Automatic error prevention: REJECT wrong version number. This adapts the versioning
     scheme as described for backports.org. See
     http://www.backports.org/dokuwiki/doku.php?id=contribute .
  * @todo Automatic error prevention: REJECT direct binary uploads.

 -- Stephan Suerken <stephan.suerken@1und1.de>  Wed, 19 Sep 2007 14:16:08 +0000

mini-buildd (0.5.0~pre.3) etch-mini-buildd; urgency=low

  * common.sh: urlget_file will now write a dummy file on download error if none
    exists yet; fixes possible stalls on -bld package removal when the configured
    rephost does not work.
  * @todo [deb] preconfigure fails: No common.sh when configuring -rep. Variables
    are copied now and need to be synced if needed.
  * update-bld: Rename file for extra sources.
  * update-rep: Configure rep w/ keep_old = 1 again (not the reason sbuild fails sometimes).
  * -bld: debconf templates: Add descriptions for all items.
  * -rep: debconf templates: Add descriptions for all items.
  * control: Add package description.

 -- Stephan Suerken <stephan.suerken@1und1.de>  Tue, 18 Sep 2007 16:56:19 +0000

mini-buildd (0.5.0~pre.2) etch-mini-buildd; urgency=low

  * @todo [deb] on --purge: mini-dinstall unix socket file is not removed.
  * init.d: Remove obsolete/false status display.
  * @todo [deb] update-rep: Restart mini-dinstall.
  * @todo [deb] run update-rep from cron daily.
  * @todo [deb] -p (postinstall) option for running update scripts from postinstall.
  * @todo [deb] update-rep: autorun update-bld on all builders (as there might be config changes).
  * @todo [deb] bld: on package removal: Also remove lvm logical volumes.
  * @todo [deb] bld: on package removal: Also remove config snippet in schroot.conf.

 -- Stephan Suerken <stephan.suerken@1und1.de>  Mon, 17 Sep 2007 16:21:47 +0000

mini-buildd (0.5.0~pre.1) etch-mini-buildd; urgency=low

  * update-bld, setup-chroots: Add CHROOT_EXTRA_PACKAGES variable; remove obsolete
    "zile"; add "lintian". Only install in update-bld, not in setup-chroot.
  * build: Add lintian test; passing test w/o errors (except bad-distribution-in-changes-file)
    is now mandatory for uploads.

 -- Stephan Suerken <stephan.suerken@1und1.de>  Thu, 13 Sep 2007 18:09:20 +0200

mini-buildd (0.4.0) etch-mini-buildd; urgency=low

  * "Milestone" (0.3->0.4): This release moves the actual "autobuild" part
    from mini-dinstalls postinstall to the preinstall, and copies DSP rather
    than relying on the repository itself to have them installed; this fixes
    various pending problems:
     - No need to have a (guessed) timeout waiting for indexes to be updated
       before auto-building.
     - No installation on the actual repository until all configured archs are
       successfully build.
     - Works around sbuild's "sporadically not updating package list"
       behaviour.
    This release also uses reniced logging throughout all scripts (see daemon.log),
    improved error handling (logs mailed on failure) and the ability to configure
    specific mirrors for base distributions (sarge/amd64 problem).
  * Cosmetic fixes for logging and mail.

 -- Stephan Suerken <stephan.suerken@1und1.de>  Tue, 11 Sep 2007 16:32:09 +0000

mini-buildd (0.3.6) etch-mini-buildd; urgency=low

  * preinstall: upload: Fix: Ignore arch upload failures, log "skipping" instead.

 -- Stephan Suerken <stephan.suerken@1und1.de>  Tue, 11 Sep 2007 11:12:39 +0000

mini-buildd (0.3.5) etch-mini-buildd; urgency=low

  * common.sh: parse_changes_file: Also add changes file itself to list of files.
  * preinstall: update for above (give unqualified changes file).

 -- Stephan Suerken <stephan.suerken@1und1.de>  Tue, 11 Sep 2007 09:29:11 +0000

mini-buildd (0.3.4) etch-mini-buildd; urgency=low

  * Adding experimental setup-lvm script.
  * postinstall -> preinstall.
  * preinstall: Until we have a better solution: Don't build parallel, fail if one build fails.
  * preinstall/update-bld: scp DSP, don't rely on a deb-src line in build chroot;
    also obsoletes sleep before build runs.
  * Add extra build script.
  * preinstall: Change build logic: 1st, build for all archs; if all were successfull,
    upload all archs and return success.
  * Only one error mail per source, including proper logs now in the body.

 -- Stephan Suerken <stephan.suerken@1und1.de>  Mon, 10 Sep 2007 16:33:22 +0000

mini-buildd (0.3.3) etch-mini-buildd; urgency=low

  * NOTE: If you update, you need to reconfigue -bld and adapt the debian mirror
    configuration.
  * -bld config: Update mbd_debian_mirror to have a default mirror plus specific
    mirrors per dist if needed.
  * Logging: All scripts now use logging for informational output; logs for
    chroot setup and update go to seperate files.
  * setup-chroots: Add "-f" option to re-generate all chroots.
  * update-bld: Update chroots: Use pipe to schroot rather than different calls
    (significant speed improvemnet); further refine error handling.

 -- Stephan Suerken <stephan.suerken@1und1.de>  Thu,  6 Sep 2007 15:05:09 +0000

mini-buildd (0.3.2) etch-mini-buildd; urgency=low

  * update-bld: Also apt-clean source chroots to avoid pkg cache hanging around.
  * control: Fix: sbuild dep must be in common as we use group sbuild for mini-buildd.
  * update-rep-html: Design fixes for <ul/>.

 -- Stephan Suerken <stephan.suerken@1und1.de>  Thu,  6 Sep 2007 08:21:44 +0000

mini-buildd (0.3.1) etch-mini-buildd; urgency=low

  * setup-chroots: Avoid broken schroot.conf on error; also better error handling
    when chroot creation fails.
  * -bld: postinst: Fix order to be able to reconfigure after the -rep has new dists
    so newly needed chroots are auto-created.
  * setup-chroots: Always also trigger a -bld update.

 -- Stephan Suerken <stephan.suerken@1und1.de>  Tue,  4 Sep 2007 16:43:19 +0000

mini-buildd (0.3.0) etch-mini-buildd; urgency=low

  * "Milestone": This release adds
    - lvm support (chroots must be in lvm logical volumes now),
    - auto-setup for chroots and a
    - nice html overview page.
  * control: -bld: Add dep for lvm2, debootstrap.
  * config: -bld: Add rephttphost (obsoletes rephost+httpport), mbd_debian_mirror, mbd_lvm_vg.
  * Initial setup-chroots script.
  * update-bld: Auto-create chroot sources lists.
  * update-rep: Add "proper" html index file; obsoleting html index on -bld.
  * update-rep: mini-dinstall config: Use keep_old = 0 for now (multiple sources confuse sbuild).

 -- Stephan Suerken <stephan.suerken@1und1.de>  Tue,  4 Sep 2007 14:26:12 +0000

mini-buildd (0.2.1) etch-mini-buildd; urgency=low

  * Fix: mini-dinstall.conf: Fix arch line creation.
  * control: Fix inter-package dependencies.

 -- Stephan Suerken <stephan.suerken@1und1.de>  Wed, 29 Aug 2007 14:44:59 +0000

mini-buildd (0.2.0) etch-mini-buildd; urgency=low

  * "Milestone": Adds auto-configuration for -bld (being a slave to the
    already configured -rep), auto-configuration for the ssh keychain,
    ssh+http port configuration items -- and has many bugs and quirks
    fixed.
  * -rep config: Cleanups, support ssh+http port.
  * -rep config: Add on the fly defaults for rephost and mail.
  * -bld: add "zero-debconf": Only ask for rephost and download config from there.
  * -bld+rep: Auto-update mechanism for ssh keyrings.
  * control: Need wget, add dep for -common.
  * -rep: Add on-the-fly default for mbd_bldhosts.

 -- Stephan Suerken <stephan.suerken@1und1.de>  Tue, 28 Aug 2007 16:26:14 +0000

mini-buildd (0.1.3) etch-mini-buildd; urgency=low

  * update-*: Output cosmetics; dput.cf is also now always updated.
  * postinst: typeo fix ;(.

 -- Stephan Suerken <stephan.suerken@1und1.de>  Wed, 22 Aug 2007 14:04:28 +0000

mini-buildd (0.1.2) etch-mini-buildd; urgency=low

  * update-rep, postinstall: use "mini-buildd-$appendix" as generic id for
    dput.

 -- Stephan Suerken <stephan.suerken@1und1.de>  Wed, 22 Aug 2007 13:47:43 +0000

mini-buildd (0.1.1) etch-mini-buildd; urgency=low

  * update-common: Remove temporary use of port 24 for ssh.
  * update-rep: Change file name ".dput.cf -> "dput.cf", so its per
    default shown in http index.
  * update-rep: Fix dput name to more generic "mini-buildd@HOST".

 -- Stephan Suerken <stephan.suerken@1und1.de>  Wed, 22 Aug 2007 13:07:58 +0000

mini-buildd (0.1.0) etch-mini-buildd; urgency=low

  * "Milestone": The repository part is configurable via debconf,
     all config files are created automatically, automatic ssh/gnupg
     handling is in place. This release will be used to build an
     initial installation for further testing.
  * Clean up public names for ssh+pgp key.
  * Establish $HOME/.mini-buildd.conf in -rep as master config file.
    - Use debconf to create the file in -rep.
    - Use in all update-* scripts.
    - Add common.sh to reduce redundancies in scripts.
  * debian: Prepare to use debconf for mini-buildd-rep:
    - Add initial template w/ all configuartion options.
    - postinst: Update to write config file.
    - rules: call dh_debconf.
    - config: Add initial debconf configuration script.
  * Add logging facility via syslog: See /var/log/daemon.log, tag "mini-buildd".
  * update-*: Always rewrite automatically produced config (even if they exist).

 -- Stephan Suerken <stephan.suerken@1und1.de>  Tue, 21 Aug 2007 13:05:32 +0000

mini-buildd (0.0.8) etch-mini-buildd; urgency=low

  * Status: Cleanup the way we run the builder -- i.e., only on
    source-only uploads; scripts now prepared to use "std" pkg
    configuration.
  * Add TODO and README.Debian.
  * postinstall: Replace python script w/ shell script by now:
    - we can simply source sh config in later.
    - much simpler logic: When upload is ARCH=SOURCE (i.e., source only
      upload), feed bld. Else, do nothing.
    - Skipping mail sending on every binary package.
    - Skipping buggy sending of NEWS.Debian file (does not always exist).
    - Mail sending will be ahndled later.
  * postinstall: Embedding build script.

 -- Stephan Suerken <stephan.suerken@1und1.de>  Thu, 16 Aug 2007 17:05:59 +0000

mini-buildd (0.0.7) etch-mini-buildd; urgency=low

  * Status: Bugfix/cleanup only release.
  * Fix: postinst rep+bld: don't call adduser.
  * Fix: Add additional real http (apache2-mpm-worker) package dep.
  * Put all helper scripts to lib/mini-buildd, as they don't really belong to usr/bin.

 -- Stephan Suerken <stephan.suerken@1und1.de>  Thu, 16 Aug 2007 15:09:22 +0000

mini-buildd (0.0.6) etch-mini-buildd; urgency=low

  * Status: This revision has the needed pkg split and a new directory layout
    for /home/mini-buildd; purge old mini-buildd package before trying this.
  * control: Fix arch to all, not any.
  * Splitting package: common, rep, bld:
    - Splitting mbd-update-home: mbd-update-common, mbd-update-rep, mbd-update-bld.
    - debian/*: Many updates to cope with new multi-pkg setup.
  * mbd-update-*: Changed directory layout for /home/mini-buildd/.

 -- Stephan Suerken <stephan.suerken@1und1.de>  Thu, 16 Aug 2007 12:52:35 +0000

mini-buildd (0.0.5) etch-mini-buildd; urgency=low

  * Status: This revision should be able to actually autobuild
    for dist "unstable"; restrictions:
    - bld-host == rep-host, and only one bld-host.
    - proper schroot setup for a chroot named "unstable" is provided beforehand.
  * Fix: Use system user for mini-buildd.
  * mbd-update-home: Support for .sbuildrc.
  * use shortcuts "rep" and "bld" for the repository and build parts, resp.
  * "Auto-ssh-key" support; dep to openssh-cleint.
  * Missing dep: mailx.
  * postinst: Make added user mini-buildd --ingroup sbuild.
  * Many smaller fixes.

 -- Stephan Suerken <stephan.suerken@1und1.de>  Wed, 15 Aug 2007 16:58:36 +0000

mini-buildd (0.0.4) etch-mini-buildd; urgency=low

  * control: Add dep for httpd.
  * mbd-update-home: Clenaups.
  * mbd-update-home: Support "public_html" link.
  * mbd-update-home: Rudimentary HTML index file support.

 -- Stephan Suerken <stephan.suerken@1und1.de>  Tue, 14 Aug 2007 14:12:16 +0000

mini-buildd (0.0.3) etch-mini-buildd; urgency=low

  * mbd-update-home: Add support for ".dput.cf".
  * control: Add dep for dput.
  * mbd-update-home: Add support to generate gnupg signing key automatically (for apt-secure).
  * control: Add dep for gnupg.

 -- Stephan Suerken <stephan.suerken@1und1.de>  Tue, 14 Aug 2007 12:24:03 +0000

mini-buildd (0.0.2) etch-mini-buildd; urgency=low

  * dirs: add usr/lib/mini-buildd for scriptlets to be used by mini-buildd only.
  * Fix: build script: Use mini-buildd user.
  * debian: Mv preinst code back to postinst (we need postinst, no need to keep
    two files w/ init script fixed);  also revert pre-depends -> depends for adduser.
  * Add mbd-update-home tool; calling that from postinst.
  * rules: Install mbd-update-home to usr/bin.
  * lib/mini-buildd: Add "sign-release".

 -- Stephan Suerken <stephan.suerken@1und1.de>  Mon,  6 Aug 2007 17:13:13 +0000

mini-buildd (0.0.1) etch-mini-buildd; urgency=low

  * Debian native package, initial release:
    - Initial debian skeleton.
    - /usr/bin/mbd-build: Included "/usr/local/bin/build" from prototype.
    - /usr/bin/mbd-postinstall: Included "/home/debian/bin/postinstall" from prototype.
    - init.d: Initial version added.
    - preinst: .mini-dinstall.conf: Initial version from prototype added.
    - preinst/postrm: add/del dedicated user "mini-buildd".

 -- Stephan Suerken <stephan.suerken@1und1.de>  Mon,  6 Aug 2007 15:17:01 +0000
